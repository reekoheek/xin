!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.xin=e():t.xin=e()}(window,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=22)}([function(t,e,n){(function(i){e.log=function(...t){return"object"==typeof console&&console.log&&console.log(...t)},e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let i=0,s=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(i++,"%c"===t&&(s=i))}),e.splice(s,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&void 0!==i&&"env"in i&&(t=i.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=n(19)(e);const{formatters:s}=t.exports;s.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this,n(18))},function(t,e,n){"use strict";n.r(e),e.default=function(t){return`${Boolean(t)}`}},function(t,e,n){"use strict";n.r(e),e.default=t=>(console.error("consoleError filtered:",t),t)},function(t,e,n){"use strict";n.r(e),e.default=t=>(console.info("consoleInfo filtered:",t),t)},function(t,e,n){"use strict";n.r(e),e.default=t=>(console.log("consoleLog filtered:",t),t)},function(t,e,n){"use strict";n.r(e),e.default=t=>(console.trace("consoleTrace filtered:",t),t)},function(t,e,n){"use strict";n.r(e),e.default=t=>(console.warn("consoleWarn filtered:",t),t)},function(t,e,n){"use strict";n.r(e),e.default=function(t){return`url(${t})`}},function(t,e,n){"use strict";n.r(e),e.default=function(t){return(t||0).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e){return t||e}},function(t,e,n){"use strict";n.r(e),e.default=(t,e)=>JSON.stringify(t,null,Number(e))},function(t,e,n){"use strict";n.r(e),e.default=function(t){return String(t||"").toLowerCase()}},function(t,e,n){"use strict";n.r(e),e.default=function(t){return Boolean(!t)}},function(t,e,n){"use strict";n.r(e),e.default=function(t){return Number(t||0).toLocaleString()}},function(t,e,n){"use strict";n.r(e),e.default=function(t){if(null==t||""===t)throw new Error("Value is required");return t}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e,n){return Array.prototype.slice.call(t||[],e,n)}},function(t,e,n){"use strict";n.r(e),e.default=function(t){return null==t?"":String(t)}},function(t,e,n){"use strict";n.r(e),e.default=function(t){return String(t||"").toUpperCase()}},function(t,e){var n,i,s=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:r}catch(t){i=r}}();var l,c=[],h=!1,u=-1;function d(){h&&l&&(h=!1,l.length?c=l.concat(c):u=-1,c.length&&p())}function p(){if(!h){var t=a(d);h=!0;for(var e=c.length;e;){for(l=c,c=[];++u<e;)l&&l[u].run();u=-1,e=c.length}l=null,h=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===r||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function _(t,e){this.fun=t,this.array=e}function m(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new _(t,e)),1!==c.length||h||a(p)},_.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,e,n){t.exports=function(t){function e(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return i.colors[Math.abs(e)%i.colors.length]}function i(t){let n;function r(...t){if(!r.enabled)return;const e=r,s=Number(new Date),o=s-(n||s);e.diff=o,e.prev=n,e.curr=s,n=s,t[0]=i.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let a=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(n,s)=>{if("%%"===n)return n;a++;const o=i.formatters[s];if("function"==typeof o){const i=t[a];n=o.call(e,i),t.splice(a,1),a--}return n}),i.formatArgs.call(e,t),(e.log||i.log).apply(e,t)}return r.namespace=t,r.enabled=i.enabled(t),r.useColors=i.useColors(),r.color=e(t),r.destroy=s,r.extend=o,"function"==typeof i.init&&i.init(r),i.instances.push(r),r}function s(){const t=i.instances.indexOf(this);return-1!==t&&(i.instances.splice(t,1),!0)}function o(t,e){const n=i(this.namespace+(void 0===e?":":e)+t);return n.log=this.log,n}function r(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return i.debug=i,i.default=i,i.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},i.disable=function(){const t=[...i.names.map(r),...i.skips.map(r).map(t=>"-"+t)].join(",");return i.enable(""),t},i.enable=function(t){let e;i.save(t),i.names=[],i.skips=[];const n=("string"==typeof t?t:"").split(/[\s,]+/),s=n.length;for(e=0;e<s;e++)n[e]&&("-"===(t=n[e].replace(/\*/g,".*?"))[0]?i.skips.push(new RegExp("^"+t.substr(1)+"$")):i.names.push(new RegExp("^"+t+"$")));for(e=0;e<i.instances.length;e++){const t=i.instances[e];t.enabled=i.enabled(t.namespace)}},i.enabled=function(t){if("*"===t[t.length-1])return!0;let e,n;for(e=0,n=i.skips.length;e<n;e++)if(i.skips[e].test(t))return!1;for(e=0,n=i.names.length;e<n;e++)if(i.names[e].test(t))return!0;return!1},i.humanize=n(20),Object.keys(t).forEach(e=>{i[e]=t[e]}),i.instances=[],i.names=[],i.skips=[],i.formatters={},i.selectColor=e,i.enable(i.load()),i}},function(t,e){var n=1e3,i=60*n,s=60*i,o=24*s,r=7*o,a=365.25*o;function l(t,e,n,i){var s=e>=1.5*n;return Math.round(t/n)+" "+i+(s?"s":"")}t.exports=function(t,e){e=e||{};var c=typeof t;if("string"===c&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var l=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*a;case"weeks":case"week":case"w":return l*r;case"days":case"day":case"d":return l*o;case"hours":case"hour":case"hrs":case"hr":case"h":return l*s;case"minutes":case"minute":case"mins":case"min":case"m":return l*i;case"seconds":case"second":case"secs":case"sec":case"s":return l*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}(t);if("number"===c&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=o)return l(t,e,o,"day");if(e>=s)return l(t,e,s,"hour");if(e>=i)return l(t,e,i,"minute");if(e>=n)return l(t,e,n,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=o)return Math.round(t/o)+"d";if(e>=s)return Math.round(t/s)+"h";if(e>=i)return Math.round(t/i)+"m";if(e>=n)return Math.round(t/n)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){var i={"./boolean":1,"./boolean.js":1,"./consoleError":2,"./consoleError.js":2,"./consoleInfo":3,"./consoleInfo.js":3,"./consoleLog":4,"./consoleLog.js":4,"./consoleTrace":5,"./consoleTrace.js":5,"./consoleWarn":6,"./consoleWarn.js":6,"./cssurl":7,"./cssurl.js":7,"./currency":8,"./currency.js":8,"./default":9,"./default.js":9,"./json":10,"./json.js":10,"./lower":11,"./lower.js":11,"./not":12,"./not.js":12,"./number":13,"./number.js":13,"./required":14,"./required.js":14,"./slice":15,"./slice.js":15,"./string":16,"./string.js":16,"./upper":17,"./upper.js":17};function s(t){var e=o(t);return n(e)}function o(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}s.keys=function(){return Object.keys(i)},s.resolve=o,t.exports=s,s.id=21},function(t,e,n){"use strict";n.r(e);var i={};n.r(i),n.d(i,"Fixture",function(){return ot}),n.d(i,"For",function(){return ct}),n.d(i,"Transition",function(){return mt}),n.d(i,"If",function(){return dt});const s=n(0)("xin::core");class o{static bootstrap(t){let e=window.xin$repository;return e?e.update(t):e=window.xin$repository=new o(t),e}static singleton(){let t=window.xin$repository;if(t||(t=o.bootstrap()),"function"!=typeof t.update)throw new Error("Invalid global xin repository found!");return t}constructor(t={}){s.enabled&&s("Repository construct..."),this.data={"customElements.version":"v1",...t}}update(t={}){s.enabled&&s("Repository update data..."),this.data=Object.assign(this.data,t)}get(t){return this.data[t]}put(t,e){if(void 0===e)return this.remove(t);this.data[t]=e}remove(t){delete this.data[t]}}function r(t){return o.bootstrap(t)}function a(){let t=0;return function(){return t++}}const l={tap:["tap","click"]},c={transitionend(){const t=document.createElement("fake"),e={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(const n in e)if(void 0!==t.style[n])return[e[n]]}},h=t=>[t];function u(t){const e=[];if("string"==typeof t&&(t=t.trim().split(/\s+/)),t instanceof Array==!1)throw new Error("Unknown event type");return t.forEach(t=>{e.push(...function(t){if(t in l==!1){const e=c[t]||h;l[t]=e(t)}return l[t]}(t))}),e}const d=a();function p(t,e="",n){return t=u(t),n||"function"!=typeof e||(n=e,e=""),e instanceof Element&&(e=function(t){if(t.hasAttribute("event-selector-id"))return t.getAttribute("event-selector-id");const e=d();return t.setAttribute("event-selector-id",e),`[event-selector-id="${e}"]`}(e)),[t,e,n]}const _=3e3,m=a();class f{constructor(t){if(!t)throw new Error("Cannot create event delegator for unknown element");this.id=m(),this.element=t,this.listeners={},this.proxies=new WeakMap}on(t,e,n){[t,e,n]=p(t,e,n),t.forEach(t=>{this.listeners[t]||this.__eventAddListener(t),this.listeners[t].handlers.push({selector:e,callback:n})})}off(t,e,n){[t,e,n]=p(t,e,n),t.forEach(t=>{const i=this.listeners[t];if(!i)return;let s=i.handlers.findIndex(t=>t.selector===e&&t.callback===n);if(-1===s){const t=this.proxies.get(n);if(-1===(s=i.handlers.findIndex(n=>n.selector===e&&n.callback===t)))return;this.proxies.delete(n)}i.handlers.splice(s,1),0===i.handlers.length&&this.__eventRemoveListener(t)})}once(t,e,n){n||"function"!=typeof e||(n=e,e="");const i=(...s)=>(this.off(t,e,i),this.proxies.delete(i),n(...s));return this.proxies.set(n,i),this.on(t,e,i)}waitFor(t,e=_){return new Promise((n,i)=>{let s;const o=e=>{clearTimeout(s),this.off(t,o),n(e)};e>0&&(s=setTimeout(()=>{this.off(t,o),i(new Error("Event#waitFor got timeout"))},e)),this.on(t,o)})}fire(t,e,n){let i;e=e||{};const s=void 0===(n=n||{}).bubbles||n.bubbles,o=Boolean(n.cancelable);switch(t){case"click":i=new Event(t,{bubbles:s,cancelable:o,detail:e});break;default:i=new CustomEvent(t,{bubbles:Boolean(s),cancelable:o,detail:e})}return this.element.dispatchEvent(i),i}dispose(){for(const t in this.listeners){const e=this.listeners[t];this.element.removeEventListener(t,e)}this.listeners={},this.element=void 0}__eventAddListener(t){const e=t=>{const{target:n}=t;for(const i in e.handlers){const{selector:s,callback:o}=e.handlers[i];this.__eventTargetMatchesSelector(n,s)&&!1===o(t)&&(t.preventDefault(),t.stopPropagation())}};e.handlers=[],this.listeners[t]=e,this.element.addEventListener(t,e,g(t))}__eventTargetMatchesSelector(t,e){return!e||t!==this.element&&(!!function(t,e){return(t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector).call(t,e)}(t,e)||!!t.parentElement&&this.__eventTargetMatchesSelector(t.parentElement,e))}__eventRemoveListener(t){const e=this.listeners[t];e&&(this.element.removeEventListener(t,e,g(t)),delete this.listeners[t])}}function g(t){switch(t){case"touchstart":case"touchmove":case"wheel":case"mousewheel":return{passive:!0};case"blur":case"focus":return!0;default:return!1}}function E(t){return t.__eventDelegator||(t.__eventDelegator=new f(t)),t.__eventDelegator}const y=a(),w=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,v=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.msCancelAnimationFrame;class C{static nextFrame(t){return w(t)}static sleep(t){return new Promise(e=>{setTimeout(()=>this.nextFrame(e),t)})}static run(t,e){const n=new C;return n.start(t,e),n}static cancel(t){t&&"function"==typeof t.cancel&&t.cancel()}constructor(){this.id=y(),this.cleared=!0}start(t,e){if("function"!=typeof t)throw new Error("Async should specify function");if(!this.cleared)throw new Error("Async already run");this.cleared=!1;const n=this,i=function(){n.frameHandle=w(()=>{n.cancel(),t()})};e?this.handle=setTimeout(i,e):i()}cancel(){this.cleared=!0,v(~~this.frameHandle),clearTimeout(~~this.handle),this.handle=this.frameHandle=void 0}}class A{constructor(t){this.immediate=Boolean(t),this.async=null,this.running=!1}start(t,e){if(this.immediate)throw new Error("Unimplemented yet!");this.running&&this.cancel(),this.running=!0,this.async=new C,this.async.start(()=>{t(),this.running=!1,this.async=null},e)}cancel(){this.running=!1,this.async.cancel(),this.async=null}}class b{static add(t,e){T[t]=e}static get(t){return T[t]||T.none}constructor({element:t,duration:e=0,transition:n="none",method:i="",adapter:s}={}){this.element=t,this.duration=e,this.transition=n,this.method=i,this.adapter=s||b.get(this.transition),this.running=!1,this.direction=0}async play(t){this.running=!0,this.direction=t,await this.adapter.play(this)}async stop(){await this.adapter.stop(this),this.running=!1,this.direction=0}}const T={none:{async play(){},async stop(){}},slide:{play:t=>new Promise(e=>{E(t.element).once("transitionend",()=>{t.element.classList.remove("trans-slide__animate"),e()}),t.element.classList.add(`trans-slide__${t.method}-${t.direction>0?"left":"right"}`),C.nextFrame(()=>{t.element.classList.add("trans-slide__animate"),C.nextFrame(()=>t.element.classList.add(`trans-slide__${t.method}`))})}),stop:t=>new Promise(e=>{C.nextFrame(()=>{t.element.classList.remove(`trans-slide__${t.method}-${t.direction>0?"left":"right"}`),t.element.classList.remove(`trans-slide__${t.method}`),e()})})},fade:{play:t=>new Promise(e=>{E(t.element).once("transitionend",()=>{e()}),t.element.classList.add(`trans-fade__${t.method}`),C.nextFrame(()=>{t.element.classList.add(`trans-fade__${t.method}-animate`)})}),stop:t=>new Promise(e=>{t.element.classList.remove(`trans-fade__${t.method}`),C.nextFrame(()=>{t.element.classList.remove(`trans-fade__${t.method}-animate`),e()})})}},x=n(0)("xin::core:define");function M(t,e,n){const i=o.singleton();let s=i.get(t);if(s)return x.enabled&&x(`Duplicate registering "${t}"`),s;if("v1"===i.get("customElements.version"))s=e,customElements.define(t,e,n);else{const i={prototype:Object.create(e.prototype,{is:{value:t}})};n&&n.extends&&(i.extends=n.extends),s=document.registerElement(t,i)}return i.put(t,s),s}const k={};const F={};const N=[{type:Number,value:t=>Number(t)},{type:Boolean,value:t=>Boolean(""===t||"true"===t||"1"===t||"on"===t)},{type:Object,value(t){try{return JSON.parse(t)}catch(e){return console.warn(`Failed decode json: "${t}" to Object`),null}}},{type:Array,value(t){try{return JSON.parse(t)}catch(e){return console.warn(`Failed decode json: "${t}" to Array`),null}}},{type:Date,value:t=>new Date(t)},{type:RegExp,value:t=>new RegExp(t)},{type:Function,value:t=>new Function(t)}];const L={};class R{static get CACHE(){return L}static get(t){if(t in L)return L[t];const e=new R(t);return L[t]=e,e}constructor(t){if(this.name=t,this.contextName="",this.baseName="",this._value=null,this.type="v",!this.name.match(/^[a-zA-Z_]/))try{return this._value=JSON.parse(this.name),void(this.type="s")}catch(t){}if("v"===this.type){const t=this.name.split(".");this.baseName=t.pop(),this.contextName=t.join(".")}}value(...t){if("s"===this.type)return this._value;for(const e of t){if(!e)continue;const t="function"==typeof e.get?e.get(this.name):e[this.name];if(void 0!==t)return t}}invoke(t,e){if("s"===this.type)throw new Error(`Method is not eligible, ${e.is}:${e.__id}#${this.name}`);const n=e.__templateDelegator;if("function"==typeof n.get){const e=this.contextName?n.get(this.contextName):n;if("function"==typeof e[this.baseName])return e[this.baseName](...t)}else if("function"==typeof n[this.name])return n[this.name](...t);throw new Error(`Method is not eligible, ${e.is}:${e.__id}#${this.name}`)}}const O={};class I{constructor(t,e,n){this.name=t,this.callback=e,this.otherArgs=n}invoke(t){const e=[t];return[].push.apply(e,this.otherArgs),this.callback.apply(null,e)}static put(t,e){O[t]=e}static get(t){const e=t.split(":"),i=e.splice(1).join(":").split(","),s=e.pop();let o=O[s];if("function"!=typeof o)try{o=n(21)(`./${s}`).default}catch(t){}if(!o)throw new Error(`Filter "${t}" not found.`);return new I(s,o,i)}}const $={s:{"[":{},"{":{}},v:{"[":{},"{":{}}};function P(t,e,n){const i=$[n][e];if(t in i)return i[t];const s=new S(t,e,n);return n!==S.STATIC&&(i[t]=s),s}class S{static get CACHE(){return $}static get(t,e){if(t=(t||"").trim(),e)return P(t,S.READONLY,"v");const n=t[0];return n!==S.READONLY&&n!==S.READWRITE||t[1]!==n?P(t,S.READONLY,S.STATIC):P(t=t.slice(2,-2).trim(),n,"v")}static getFn(t,e,n){return S.get(-1===t.indexOf("(")?`${t}(${e.join(", ")})`:t,n)}static rawTokenize(t){let e=0;const n=[];for(;t&&e++<10;){const e=t.match(/^\s*("[^"]*"|[^,]+),?/);t=t.substr(e[0].length),n.push(e[1].trim())}return n}static tokenize(t){return S.rawTokenize(t).map(t=>R.get(t))}constructor(t,e,n){if(this.mode=e,this.type=n,this.name="",this.args=[],this.filters=[],this.value=t,this.varArgs=[],n===S.STATIC)return;const i=t.split("|"),s=i[0].trim();if(this.filters=i.slice(1).map(t=>I.get(t.trim())),-1===s.indexOf("("))this.type=S.PROPERTY,this.name=s,this.args.push(R.get(s));else{this.mode=S.READONLY,this.type=S.METHOD;const t=s.match(/([^(]+)\(([^)]*)\)/);this.name=t[1].trim(),this.fn=R.get(this.name),this.args=S.tokenize(t[2])}this.varArgs=this.args.reduce((t,e)=>("v"===e.type&&-1===t.indexOf(e.name)&&t.push(e),t),[])}get constant(){return this.type!==S.METHOD&&this.varArgs.length!==this.args.length}invoke(t,e){if(this.type===S.PROPERTY){const n=this.args[0].value(t,e);return this.filters.reduce((t,e)=>e.invoke(t),n)}const n=this.args.map(n=>n.value(t,e));return this.fn.invoke(n,t)}}S.STATIC="s",S.METHOD="m",S.PROPERTY="p",S.READONLY="[",S.READWRITE="{";class D{constructor(t){this.name=t,this.children={},this.annotations=[]}getChild(t){return this.children[t]||(this.children[t]=new D(t)),this.children[t]}getAnnotatedPaths({excludeMethods:t=!1}={}){const e=[];for(const n in this.children){this.children[n].getAnnotatedPaths({excludeMethods:t}).forEach(t=>{e.push(this.name?`${this.name}.${t}`:t)})}return!this.annotations.length||t&&this.hasMethodAnnotation()||e.push(this.name),e}hasMethodAnnotation(){return Boolean(this.annotations.find(({expr:t})=>t.type===S.METHOD&&t.name===this.name))}annotate(t){this.annotations.push(t)}deannotate(t){const e=this.annotations.indexOf(t);-1!==e&&this.annotations.splice(e,1)}dispatchEffect({model:t}){this.annotations.forEach(e=>{e.effect({model:t})}),Object.keys(this.children).forEach(e=>{this.children[e].dispatchEffect({model:t})})}dispose(){Object.keys(this.children).forEach(t=>{this.children[t].dispose()}),this.children={},this.annotations.forEach(t=>{this.deannotate(t)}),this.annotations=[]}}class j{constructor(t,e){this.node=t,this.name=e}set(t){"function"==typeof this.node.set?this.node.set(this.name,t):this.node[this.name]=t}get(){return"function"==typeof this.node.get?this.node.get(this.name):this.node[this.name]}}const{TEXT_NODE:H,ELEMENT_NODE:B}=Node;const{TEXT_NODE:U,ELEMENT_NODE:q}=Node;function G(t){return t.nodeType===U&&t.parentElement&&"TEXTAREA"===t.parentElement.nodeName}const{ELEMENT_NODE:z}=Node;const W=[class{static test(t){return"function"==typeof t}constructor(t){this.callback=t}set(t){(0,this.callback)(t)}get(){throw new Error("CallbackAccessor is write-only")}},class extends j{static test(t,e){return!("value"!==e||!function(t){return t.nodeType===q&&"INPUT"===t.nodeName}(t))||(!!G(t)||void 0)}constructor(t){super(t,"value"),G(t)&&(this.node=t.parentElement)}set(t){document.activeElement!==this.node&&super.set(t)}},class extends j{static test(t,e){return t.nodeType===H||"text"===e&&t.nodeType===B}constructor(t){super(t,"textContent")}set(t){null==t&&(t=""),this.node.textContent=t}get(){throw new Error("TextAccessor is write-only")}},class extends j{static test(t,e){return"html"===e&&t.nodeType===Node.ELEMENT_NODE}set(t){null==t&&(t=""),this.node.innerHTML=t}get(){throw new Error("HTMLAccessor is write-only")}},class extends j{static test(t,e){return e&&e.startsWith("class.")}constructor(t,e){super(t,e.split(".").splice(1).join("."))}set(t){t?this.node.classList.add(this.name):this.node.classList.remove(this.name)}get(){throw new Error("ClassAccessor is write-only")}},class extends j{static test(t,e){return e&&e.startsWith("style.")}constructor(t,e){super(t,e.split(".").splice(1).join("."))}set(t){this.node.style[this.name]=t||""}get(){throw new Error("StyleAccessor is write-only")}},class extends j{static test(t,e){return t.nodeType===Node.ELEMENT_NODE&&e.endsWith("$")}constructor(t,e){super(t,e.slice(0,-1))}set(t){null==t||""===t?this.node.removeAttribute(this.name):this.node.setAttribute(this.name,t)}get(){return this.node.getAttribute(this.name)}},class extends j{static test(t,e){return t.nodeType===z}constructor(t,e){super(t,function(t){const e=F[t];return e||(t.indexOf("-")<0?F[t]=t:F[t]=t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()}),F[t])}(e))}}];function V(t,e){const n=W.find(n=>n.test(t,e));if(n)return new n(t,e);throw new Error(`Unimplemented resolving accessor for nodeType: ${t.nodeType} name: ${e}`)}class Y{constructor(t,e){this.expr=t,this.accessor=e}effect({model:t}){const e=this.expr.invoke(t);this.accessor&&this.accessor.set(e)}}(function(){if(document.__importNode)return!1;const t=document.createElement("template");t.innerHTML="<template>i</template>";const e=document.importNode(t.content,!0);return!e.firstChild.content.firstChild||"i"!==e.firstChild.content.firstChild.textContent})()&&(document.__importNode=document.importNode,document.importNode=function(t,e){if(!e)return document.__importNode(t,e);const n=[].slice.call(t.querySelectorAll("template")),i=document.__importNode(t,e);return i.querySelectorAll("template").forEach((t,e)=>{t.innerHTML=n[e].innerHTML}),i});const J=(()=>"undefined"!=typeof window&&("HTMLUnknownElement"in window&&!(document.createElement("slot")instanceof HTMLUnknownElement)))();const X=a();class Z{constructor(t,e={}){this.__templateAssignId(),t&&this.__templateInitialize(t,e)}get $(){return this.__templateHost.getElementsByTagName("*")}get $global(){return window}get $repository(){return o.singleton()}$$(t){return this.__templateHost.querySelector(t)}dispose(){this.__templateUninitialize()}on(){E(this.__templateHost).on(...arguments)}off(){E(this.__templateHost).off(...arguments)}once(){E(this.__templateHost).once(...arguments)}waitFor(){return E(this.__templateHost).waitFor(...arguments)}fire(t,e,n){return E(this.__templateHost).fire(t,e,n)}all(t){for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&this.set(e,t[e])}get(t){let e=this;return this.__templateGetPathAsArray(t).some(t=>null==e?(e=void 0,!0):(e=e[t],!1)),e}set(t,e){if(1===arguments.length&&"object"==typeof t){const e=t;for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&this.set(t,e[t]);return}t=this.__templateGetPathAsArray(t),e!==this.get(t)&&(this.__templateWalkSet(t,e),this.notify(t))}__templateWalkSet(t,e){let n=this;t.slice(0,-1).forEach(t=>{n&&(void 0!==n[t]&&null!==n[t]||(n[t]={}),n=n[t])});const i=t.slice(-1).pop();n[i]=e}push(t,...e){t=this.__templateGetPathAsArray(t);let n=this;t.slice(0,-1).forEach(t=>{n&&(void 0!==n[t]&&null!==n[t]||(n[t]={}),n=n[t])});const i=t.slice(-1).pop();Array.isArray(n[i])||(n[i]=[]),n[i]=n[i].slice();const s=n[i].push(...e);return this.notify(t),s}pop(t){t=this.__templateGetPathAsArray(t);let e=this;t.slice(0,-1).forEach(t=>{e&&(void 0!==e[t]&&null!==e[t]||(e[t]={}),e=e[t])});const n=t.slice(-1).pop();Array.isArray(e[n])||(e[n]=[]),e[n]=e[n].slice();const i=e[n].pop();return this.notify(t),i}splice(t,e,n,...i){t=this.__templateGetPathAsArray(t);let s=this;t.slice(0,-1).forEach(t=>{s&&(void 0!==s[t]&&null!==s[t]||(s[t]={}),s=s[t])});const o=t.slice(-1).pop();Array.isArray(s[o])||(s[o]=[]),s[o]=s[o].slice();const r=s[o].splice(e,n,...i);return this.notify(t),r}notify(t){if(t=this.__templateGetPathAsString(t),!this.__templateMounted)return this.__templateNotifyOnMounted=this.__templateNotifyOnMounted||[],void(-1===this.__templateNotifyOnMounted.indexOf(t)&&this.__templateNotifyOnMounted.push(t));const e=this.__templateGetBinding(t);e&&e.dispatchEffect({model:this})}__templateAssignId(){void 0===this.__id&&(this.__id=X())}__templateInitialize(t,e={}){if(this.__templateBinding=new D,this.__templateEventListeners=[],this.__templateDelegator=this,this.__templateMounted=!1,this.__templateNotifyOnMounted=[],this.__templateInitProps(e),this.__templateInitValues(),t){if("string"==typeof t){const e=t;(t=document.createElement("template")).innerHTML=e}this.__template=function(t){return!t.content&&HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(t),t}(t),this.__templateChildNodes=[],this.__templateParseAnnotations()}}__templateInitProps(t={}){this.__templateProps={...t},this.__templateInitialValues={},t=this.__templateProps;for(const e in t)this.__templateInitProp(e,t[e])}__templateInitProp(t,e){if("computed"in e){const n=S.getFn(e.computed,[],!0);this.__templateAnnotate(n,V(this,t)),this.__templateInitialValues[t]=()=>n.invoke(this)}if("observer"in e){const n=S.getFn(e.observer,[t],!0);this.__templateAnnotate(n)}}__templateInitValues(){const t=this.__templateProps;for(const e in t){const n=t[e];this[e]=this.__templateGetInitialValue(e,n),void 0!==this[e]&&this.notify(e)}}__templateGetInitialValue(t,e){let n;if(n=this.__templateInitialValues[t]?this.__templateInitialValues[t]():this[t],"value"in e&&function(t,e){return void 0===e||"title"===t&&!e}(t,n)&&(n=function(t,...e){return"function"==typeof t?t(...e):t}(e.value)),e.required&&void 0===n)throw new Error(`${this.is}:${this.__id} missing required ${t}`);return n}__templateUninitialize(){this.__templateRemoveEventListener(),this.__templateMounted&&this.unmount(),this.__templateBinding.dispose(),this.__templateBinding=void 0,this.__templateChildNodes=void 0,this.__template=void 0,this.__templateDelegator=void 0}mount(t,e){if(this.__templateMounted)throw new Error("Template already mounted");if(!t)throw new Error("Cannot mount to unknown host");this.__templateHost=t,this.__templateStartEventListeners(),this.__template&&(e||(this.__template.parentElement===this.__templateHost?e=this.__template:(e=document.createComment(`marker-${this.__id}`),this.__templateHost.appendChild(e))),this.__templateMarker=e,this.__templateRender()),this.__templateMounted=!0,this.__templateNotifyOnMounted.forEach(t=>this.notify(t)),this.__templateNotifyOnMounted=[],this.notify("$global"),this.notify("$repository")}unmount(){if(!this.__templateMounted)throw new Error("Template already unmounted");this.__templateMounted=!1,this.__templateNotifyOnMounted=[],this.__templateStopEventListeners(),this.__templateRemoveGeneratedMarker(),this.__templateHost=void 0,this.__templateMarker=void 0,this.__template&&this.__templateUnrender()}__templateRemoveGeneratedMarker(){this.__templateMarker&&this.__templateMarker.parentElement===this.__templateHost&&this.__templateMarker.nodeType===Node.COMMENT_NODE&&this.__templateMarker.data===`marker-${this.__id}`&&this.__templateHost.removeChild(this.__templateMarker)}__templateStartEventListeners(){this.__templateEventListeners.forEach(({name:t,selector:e,listener:n})=>this.on(t,e,n))}__templateStopEventListeners(){this.__templateEventListeners.forEach(({name:t,selector:e,listener:n})=>this.off(t,e,n))}__templateRender(){const t=document.createDocumentFragment();[...this.__templateHost.childNodes].forEach(e=>{e!==this.__templateMarker&&t.appendChild(e)});const e=document.createDocumentFragment();this.__templateChildNodes.forEach(t=>e.appendChild(t)),e.querySelectorAll("slot").forEach(n=>{const i=function(t){return J?t.name:t.getAttribute("name")}(n),s=n.parentElement||e,o=document.createComment(`slot ${i}`);s.insertBefore(o,n),s.removeChild(n),i?t.querySelectorAll(`[slot="${i}"]`).forEach(t=>{s.insertBefore(t,o)}):s.insertBefore(t,o)}),this.__templateMarker.parentElement.insertBefore(e,this.__templateMarker)}__templateUnrender(){this.__templateChildNodes.forEach(t=>{t.parentElement&&t.parentElement.removeChild(t)})}__templateGetPathAsArray(t){return"string"!=typeof t?t:t.split(".")}__templateGetPathAsString(t){return"string"==typeof t?t:t.join(".")}__templateParseAnnotations(){const t=document.importNode(this.__template.content,!0);this.__templateChildNodes=[...t.childNodes];const e=this.__templateChildNodes.length;for(let t=0;t<e;t++){const e=this.__templateChildNodes[t];this.__templateParseNodeAnnotations(e)}}__templateParseEventAnnotations(t,e){const n=t.getAttribute(e),i=e.slice(1,-1),s=S.getFn(n,[],!0),o=t;this.__templateAddEventListener({name:i,selector:o,listener:t=>s.invoke(this,{evt:t}),expr:s})}__templateParseAttributeAnnotations(t){const e=t.attributes.length;for(let n=0;n<e;n++){const e=t.attributes[n],i=e.name;if(-1===["id","class","style"].indexOf(i))if(0===i.indexOf("("))this.__templateParseEventAnnotations(t,i);else{const n=S.get(e.value);if(n.type===S.STATIC)continue;this.__templateAnnotate(n,V(t,i))}}}__templateParseElementAnnotations(t){if(!t.__templateModel){if(t.__templateModel=this,K(t.attributes)&&this.__templateParseAttributeAnnotations(t),K(t.childNodes)){const e=[].slice.call(t.childNodes),n=e.length;for(let t=0;t<n;t++)this.__templateParseNodeAnnotations(e[t])}t.querySelectorAll("slot").forEach(t=>{t.childNodes.forEach(t=>{this.__templateParseNodeAnnotations(t)})})}}__templateParseNodeAnnotations(t){switch(t.nodeType){case Node.TEXT_NODE:return this.__templateParseTextAnnotations(t);case Node.ELEMENT_NODE:return this.__templateParseElementAnnotations(t)}}__templateParseTextAnnotations(t){const e=S.get(t.textContent);return e.type!==S.STATIC&&this.__templateAnnotate(e,V(t))}__templateAnnotate(t,e){if(t.type===S.STATIC)throw new Error("Do not annotate static expr");return t.constant?(e.set(t.invoke(this)),!1):(this.__templateAnnotateRead(t,e),t.mode===S.READWRITE&&t.type===S.PROPERTY&&e.node instanceof HTMLElement&&this.__templateAnnotateWrite(t,e),!0)}__templateAnnotateRead(t,e){const n=new Y(t,e);n.expr.type===S.METHOD&&this.__templateAddAnnotationBinding(n.expr.fn.name,n),n.expr.varArgs.forEach(t=>{this.__templateAddAnnotationBinding(t.name,n)})}__templateAnnotateWrite(t,e){const{node:n}=e,{nodeName:i}=n,s=n,o=n=>this.set(t.name,e.get());if("INPUT"===i){const t=n.getAttribute("type");if("radio"===t||"checkbox"===t)throw new Error("Unimplemented yet");this.__templateAddEventListener({name:"input",selector:s,listener:o})}else"TEXTAREA"===i?this.__templateAddEventListener({name:"input",selector:s,listener:o}):"SELECT"===i&&this.__templateAddEventListener({name:"change",selector:s,listener:o})}__templateAddEventListener(t){if(!t.name)throw new Error("Event listener must define name");if(!t.listener)throw new Error("Event listener must define listener callback");this.__templateEventListeners.push(t)}__templateRemoveEventListener({name:t,selector:e,listener:n}={}){this.__templateEventListeners=this.__templateEventListeners.filter(i=>!((e=>void 0===t||t===e)(i.name)&&(t=>void 0===e||e===t)(i.selector)&&(t=>void 0===n||n===t)(i.listener)))}__templateGetBinding(t){if(!t)return this.__templateBinding;return this.__templateGetPathAsArray(t).reduce((t,e)=>t.getChild(e),this.__templateBinding)}__templateAddCallbackBinding(t,e){const n=new Y(S.get(t,!0),V(e));return this.__templateGetBinding(t).annotate(n),n}__templateAddAnnotationBinding(t,e){this.__templateGetBinding(t).annotate(e)}}function K(t){return t&&t.length}const Q=n(0)("xin::component"),tt={},et=Z.prototype,nt=Object.getOwnPropertyNames(et);function it(t){const e=o.singleton();if(tt[t])return tt[t];let n;"v1"===e.get("customElements.version")?n=window[t]:(n=function(){}).prototype=Object.create(window[t].prototype);class i extends n{constructor(){super(),this.createdCallback()}get is(){return this.nodeName.toLowerCase()}get $(){return this.__templateHost.getElementsByTagName("*")}get $global(){return window}get $repository(){return e}created(){}ready(){}attached(){}detached(){}createdCallback(){this.__templateAssignId(),Q.enabled&&Q(`CREATED ${this.is}:${this.__id}`),this.created(),this.__componentReady=!1,this.__componentReadyInvoked=!1,this.__componentAttaching=!1,this.__componentInitialPropValues={},this.__componentProps=null}readyCallback(){this.__componentReady=!0,E(this).fire("before-ready"),this.hasAttribute("xin-id")||this.setAttribute("xin-id",this.__id),Q.enabled&&Q(`READY ${this.is}:${this.__id}`),this.__componentInitTemplate(),this.__componentInitListeners(),this.ready(),E(this).fire("ready"),this.__componentAttaching&&this.attachedCallback()}attachedCallback(){this.__componentAttaching=!0,this.__componentReady?(this.__componentMount(),Q.enabled&&Q(`ATTACHED ${this.is}:${this.__id} ${this.__componentAttaching?"(delayed)":""}`),this.attached(),this.__componentAttaching=!1):this.__componentReadyInvoked||(this.__componentReadyInvoked=!0,C.run(()=>this.readyCallback()))}detachedCallback(){this.detached(),this.__componentUnmount()}connectedCallback(){return this.attachedCallback()}disconnectedCallback(){return this.detachedCallback()}__templateInitProp(t,e){Z.prototype.__templateInitProp.call(this,t,e);const n=function(t){const e=k[t];return e||(k[t]=t.replace(/([a-z][A-Z])/g,function(t){return t[0]+"-"+t[1].toLowerCase()}),k[t])}(t);if(!this.hasAttribute(n))return;const i=this.getAttribute(n),s=S.get(i);"notify"in e&&s.mode===S.READWRITE&&this.__templateAddCallbackBinding(t,t=>this.__templateModel.set(s.name,t)),this.__templateInitialValues[t]=s.type===S.STATIC?()=>(function(t,e){const n=N.find(t=>t.type===e);return n?n.value(t):t})(i,e.type):()=>s.invoke(this.__templateModel)}__componentInitTemplate(){let t=this.template;1===this.childElementCount&&"TEMPLATE"===this.firstElementChild.nodeName&&(t=this.firstElementChild,this.removeChild(t)),this.__templateInitialize(t,this.props)}__componentInitListeners(){this.listeners&&Object.keys(this.listeners).forEach(t=>{const e=function(t){t=t.trim();const[e,...n]=t.split(/\s+/),i=n.length?n.join(" "):null;return{key:t,eventName:e,selector:i}}(t),n=S.getFn(this.listeners[t],[],!0);this.__templateAddEventListener({name:e.eventName,selector:e.selector,listener:t=>n.invoke(this,{evt:t})})})}__componentMount(){this.mount(this)}__componentUnmount(){this.__componentReady&&this.unmount()}}return nt.forEach(t=>{"$"!==t&&"$global"!==t&&"$repository"!==t&&"__templateInitProp"!==t&&(i.prototype[t]=et[t])}),tt[t]=i,i}const st=it("HTMLElement");class ot extends st{static create(t,e={}){const n=document.createElement("div");n.innerHTML=`<xin-fixture><template>${t}</template></xin-fixture>`;const i=window.fixture=n.firstElementChild;return i.__fixtureInitialData=e,document.body.appendChild(i),new Promise(t=>t(i))}attached(){super.attached(),this.set(this.__fixtureInitialData),delete this.__fixtureInitialData,this.connected=!0,C.run(()=>this.fire("connected"))}detached(){super.detached(),this.connected=!1,this.fire("disconnected")}dispose(){this.parentElement.removeChild(this),super.dispose()}async waitConnected(t){this.connected||await E(this).waitFor("connected"),await C.sleep(t)}}M("xin-fixture",ot);class rt extends Z{constructor(t,e){super(),this.__loopInstance=e,this.__loopAs=e.as,this.__loopIndexAs=e.indexAs,this.__templateInitialize(t),this.__templateDelegator=e.__templateModel,this.__templateModel=e,this.__templateAddCallbackBinding(this.__loopAs,t=>{e.items[this[this.__loopIndexAs]]=t}),this.__templateChildNodes.forEach(t=>{t.nodeType===Node.ELEMENT_NODE&&(t.__loopModel=this)}),e.__loopExternalAnnotations.forEach(({path:t})=>this.set(t,e.get(t)))}get is(){return"$for-row"}update(t,e){this[this.__loopAs]=t,this[this.__loopIndexAs]=e,this.notify(this.__loopAs),this.notify(this.__loopIndexAs)}__templateRender(){const t=document.createDocumentFragment();this.__templateChildNodes.forEach(e=>t.appendChild(e)),this.__templateMarker.parentElement.insertBefore(t,this.__templateMarker)}dispose(){this.__templateModel=void 0,this.__loopInstance=void 0,this.__loopAs=void 0,this.__loopIndexAs=void 0,super.dispose()}}const at='Invalid xin-for definition,\nmust be:\n<xin-for items="[[items]]">\n  <template>...</template>\n</xin-for>',lt=()=>!0;class ct extends st{get props(){return{...super.props,items:{type:Array,notify:!0,observer:"__loopItemsChanged"},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},filter:{type:Function,observer:"__loopItemsChanged"},to:{type:String,value:""}}}attached(){super.attached(),this.__loopSetupExternals(),this.__loopRows=[],this.__loopItemsChanged()}detached(){super.detached(),C.cancel(this.__loopDebounceItemsChanged),this.__loopRows.forEach(t=>{t.unmount(),t.dispose()}),this.__loopRows=[],this.__loopTeardownExternals()}__loopSetupExternals(){this.__loopExternalAnnotations=[],new rt(this.__loopTemplate,this).__templateGetBinding().getAnnotatedPaths({excludeMethods:!0}).filter(t=>{const e=this.__templateGetPathAsArray(t);return e[0]!==this.as&&e[0]!==this.indexAs}).forEach(t=>{const e=this.__templateGetPathAsArray(t);this.__loopAddExternalAnnotation(e[0]),t!==e[0]&&this.__loopAddExternalAnnotation(t)})}__loopAddExternalAnnotation(t){if(this.__loopExternalAnnotations.find(e=>e.path===t))return;const e=e=>{this.set(t,e);const n=n=>n.set(t,e);this.__loopRows&&this.__loopRows.forEach(n)},n=this.__templateModel.__templateAddCallbackBinding(t,e);e(this.__templateModel.get(t)),this.__loopExternalAnnotations.push({path:t,annotation:n})}__loopTeardownExternals(){this.__loopExternalAnnotations.forEach(({path:t,annotation:e})=>{this.__templateModel.__templateGetBinding(t).deannotate(e)}),this.__loopExternalAnnotations=[]}__componentInitTemplate(){if(1!==this.children.length&&"TEMPLATE"!==this.firstElementChild.nodeName)throw new Error(at);this.__loopTemplate=this.firstElementChild,this.removeChild(this.__loopTemplate),super.__componentInitTemplate()}__componentMount(){this.__loopHost=this.__templateModel,this.__loopSetupMarker(),this.mount(this,this.__loopMarker)}__componentUnmount(){super.__componentUnmount(),this.__loopTeardownMarker(),this.__loopHost=void 0}__loopSetupMarker(){const t=this.getAttribute("to");if(t){const e=this.parentElement.querySelector(t)||document.querySelector(t);if(!e)throw new Error(`xin-for render to unknown element ${t}`);return this.__loopMarker=document.createComment("marker-for"),void e.appendChild(this.__loopMarker)}this.__loopMarker=this}__loopTeardownMarker(){this.__loopMarker!==this&&this.__loopMarker.parentElement.removeChild(this.__loopMarker),this.__loopMarker=void 0}__loopItemsChanged(){C.cancel(this.__loopDebounceItemsChanged),this.__loopDebounceItemsChanged=C.run(()=>{let t=0;const e=this.items;if(e&&e.length){const n=this.filter||lt;e.filter(n).forEach((e,n)=>{if(!this.__loopRows[n]){const t=new rt(this.__loopTemplate,this);t.mount(this.__loopHost,this.__loopMarker),this.__loopRows.push(t)}this.__loopRows[n].update(e,n),t++})}this.__loopRows.splice(t).forEach(t=>{t.unmount(),t.dispose()})})}itemForElement(t){return this.modelForElement(t).get(this.as)}indexForElement(t){return this.modelForElement(t).get(this.indexAs)}modelForElement(t){for(;t&&!t.__loopModel;)t=t.parentElement;return t.__loopModel}}M("xin-for",ct);class ht extends Z{constructor(t,e){super(),this.__ifInstance=e,this.__ifAnnotations=[],this.__templateInitialize(t),this.__templateDelegator=e.__templateModel,this.__templateModel=e,this.__templateChildNodes.forEach(t=>{t.nodeType===Node.ELEMENT_NODE&&(t.__ifModel=this)})}get is(){return"$if-row"}__templateRender(){const t=document.createDocumentFragment();this.__templateChildNodes.forEach(e=>t.appendChild(e)),this.__templateMarker.parentElement.insertBefore(t,this.__templateMarker)}__templateAnnotateWrite(t,e){super.__templateAnnotateWrite(t,e);const{node:n}=e,{nodeName:i}=n,s=n,o=n=>this.__templateModel.__templateModel.set(t.name,e.get());if("INPUT"===i){const t=n.getAttribute("type");if("radio"===t||"checkbox"===t)throw new Error("Unimplemented yet");this.__templateAddEventListener({name:"input",selector:s,listener:o})}else"TEXTAREA"===i?this.__templateAddEventListener({name:"input",selector:s,listener:o}):"SELECT"===i&&this.__templateAddEventListener({name:"change",selector:s,listener:o})}}const ut='Invalid xin-if definition,\nmust be:\n<xin-if items="[[items]]">\n  <template>...</template>\n  <template else>...</template>\n</xin-if>';class dt extends st{get props(){return{...super.props,condition:{type:Boolean,observer:"__ifObserveCondition(condition)"},to:{type:String,value:""}}}attached(){super.attached(),this.__ifSetupExternals(),this.__ifObserveCondition(this.condition)}detached(){super.detached(),this.__ifThenRow.dispose(),this.__ifElseRow.dispose(),this.__ifThenRow=void 0,this.__ifElseRow=void 0,this.__ifTeardownExternals()}__ifSetupExternals(){this.__ifThenRow=new ht(this.__ifThenTemplate,this),this.__ifElseTemplate&&(this.__ifElseRow=new ht(this.__ifElseTemplate,this)),this.__ifExternalAnnotations=[],this.__ifThenRow.__templateGetBinding().getAnnotatedPaths({excludeMethods:!0}).forEach(t=>{const e=this.__templateGetPathAsArray(t);this.__ifAddExternalAnnotation(e[0]),t!==e[0]&&this.__ifAddExternalAnnotation(t)})}__ifAddExternalAnnotation(t){if(this.__ifExternalAnnotations.find(e=>e.path===t))return;const e=e=>{this.set(t,e),this.__ifThenRow.set(t,e),this.__ifElseRow&&this.__ifElseRow.set(t,e)},n=this.__templateModel.__templateAddCallbackBinding(t,e);e(this.__templateModel.get(t)),this.__ifExternalAnnotations.push({path:t,annotation:n})}__ifTeardownExternals(){this.__ifExternalAnnotations.forEach(({path:t,annotation:e})=>{this.__templateModel.__templateGetBinding(t).deannotate(e)}),this.__ifExternalAnnotations=[]}__componentInitTemplate(){const t=this.children;if(this.children.length<1||this.children.length>2||"TEMPLATE"!==this.firstElementChild.nodeName)throw new Error(ut);if(this.__ifThenTemplate=this.firstElementChild,this.removeChild(this.firstElementChild),1!==t.length||"TEMPLATE"!==this.firstElementChild.nodeName)throw new Error(ut);this.__ifElseTemplate=this.firstElementChild,this.removeChild(this.firstElementChild),super.__componentInitTemplate()}__componentMount(){this.__ifHost=this.__templateModel,this.__ifSetupMarker(),this.mount(this,this.__ifMarker)}__componentUnmount(){super.__componentUnmount(),this.__ifTeardownMarker(),this.__ifHost=void 0}__ifSetupMarker(){const t=this.getAttribute("to");if(t){const e=this.parentElement.querySelector(t)||document.querySelector(t);if(!e)throw new Error(`xin-if render to unknown element ${t}`);return this.__ifMarker=document.createComment("marker-if"),void e.appendChild(this.__ifMarker)}this.__ifMarker=this}__ifTeardownMarker(){this.__ifMarker!==this&&this.__ifMarker.parentElement.removeChild(this.__ifMarker),this.__ifMarker=void 0}__ifObserveCondition(t){this.__ifThenRow&&(t?(this.__ifMount(this.__ifThenRow),this.__ifUnmount(this.__ifElseRow)):(this.__ifMount(this.__ifElseRow),this.__ifUnmount(this.__ifThenRow)))}__ifMount(t){t&&!t.__templateMounted&&t.mount(this.__ifHost,this.__ifMarker)}__ifUnmount(t){t&&t.__templateMounted&&t.unmount()}}M("xin-if",dt);const pt="transition",_t="animation";class mt extends st{get props(){return{...super.props,name:{type:String,required:!0},type:{type:String,value:pt}}}ready(){super.ready(),this.enterClass=`${this.name}-enter`,this.enterActiveClass=`${this.name}-enter-active`,this.enterToClass=`${this.name}-enter-to`,this.leaveClass=`${this.name}-leave`,this.leaveActiveClass=`${this.name}-leave-active`,this.leaveToClass=`${this.name}-leave-to`}async insertBefore(t,e){const n=t instanceof DocumentFragment?[...t.children]:[t];vt(n,this.enterClass),super.insertBefore(t,e),await new Promise(t=>{C.nextFrame(()=>{vt(n,this.enterActiveClass,this.enterToClass),C.nextFrame(()=>{Ct(n,this.enterClass),At(n,this.type,t)})})}),Ct(n,this.enterActiveClass,this.enterToClass)}async removeChild(t){if(1!==t.nodeType)return;const e=[t];vt(e,this.leaveClass),await new Promise(t=>{C.nextFrame(()=>{vt(e,this.leaveActiveClass,this.leaveToClass),At(e,this.type,t)})}),super.removeChild(t)}}M("xin-transition",mt);const ft=/\b(transform|all)(,|$)/,gt="transition",Et="transitionend",yt="animation",wt="animationend";function vt(t,...e){t.forEach(t=>{t.classList.add(...e)})}function Ct(t,...e){t.forEach(t=>{t.classList.remove(...e)})}function At(t,e,n){let i=0;function s(){++i>=t.length&&n()}t.forEach(t=>{const{type:n,timeout:i,propCount:o}=function(t,e){const n=getComputedStyle(t),i=(n[gt+"Delay"]||"").split(", "),s=(n[gt+"Duration"]||"").split(", "),o=bt(i,s),r=(n[yt+"Delay"]||"").split(", "),a=(n[yt+"Duration"]||"").split(", "),l=bt(r,a);let c,h=0,u=0;e===pt?o>0&&(c=pt,h=o,u=s.length):e===_t?l>0&&(c=_t,h=l,u=a.length):(h=Math.max(o,l),u=(c=h>0?o>l?pt:_t:null)?c===pt?s.length:a.length:0);const d=c===pt&&ft.test(n[gt+"Property"]);return{type:c,timeout:h,propCount:u,hasTransform:d}}(t,e);if(!n)return s();const r=n===pt?Et:wt;let a=0;const l=function(){t.removeEventListener(r,c),s()},c=function(e){e.target===t&&++a>=o&&l()};setTimeout(function(){a<o&&l()},i+1),t.addEventListener(r,c)})}function bt(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map(function(e,n){return Tt(e)+Tt(t[n])}))}function Tt(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}n.d(e,"Fx",function(){return b}),n.d(e,"bootstrap",function(){return r}),n.d(e,"Repository",function(){return o}),n.d(e,"event",function(){return E}),n.d(e,"Delegator",function(){return f}),n.d(e,"Async",function(){return C}),n.d(e,"Debounce",function(){return A}),n.d(e,"define",function(){return M}),n.d(e,"base",function(){return it}),n.d(e,"Component",function(){return st}),n.d(e,"Template",function(){return Z}),n.d(e,"Filter",function(){return I}),n.d(e,"components",function(){return i})}])});