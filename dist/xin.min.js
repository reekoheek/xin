!function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=31)}([function(t,e,n){"use strict";var i=n(1);const s=n(9)("xin::core:define");function r(t,e,n){const r=Object(i.g)();let o=r.get(t);if(o)return s.enabled&&s(`Duplicate registering "${t}"`),o;if("v1"===r.get("customElements.version"))o=e,window.customElements.define(t,e,n);else{let i={prototype:Object.create(e.prototype,{is:{value:t}})};n&&n.extends&&(i.extends=n.extends),o=document.registerElement(t,i)}return r.put(t,o),o}var o=n(5);let a={};function c(t){let e=a[t];return e||(a[t]=t.replace(/([a-z][A-Z])/g,function(t){return t[0]+"-"+t[1].toLowerCase()}),a[t])}let l={};const h="undefined"!=typeof window&&"HTMLUnknownElement"in window&&!(document.createElement("slot")instanceof window.HTMLUnknownElement);function u(t,e){switch(e){case Number:t=Number(t);break;case Boolean:t=Boolean(""===t||"true"===t||"1"===t||"on"===t);break;case Object:try{t=JSON.parse(t)}catch(t){}break;case Array:try{t=JSON.parse(t)}catch(e){t=null}break;case Date:t=new Date(t);break;case RegExp:t=new RegExp(t);break;case Function:t=new Function(t)}return t}function p(t,...e){return"function"==typeof t?t(...e):t}(function(){if(document.__importNode)return!1;let t=document.createElement("template");t.innerHTML="<template>i</template>";let e=document.importNode(t.content,!0);return!e.firstChild.content.firstChild||"i"!==e.firstChild.content.firstChild.textContent})()&&(document.__importNode=document.importNode,document.importNode=function(t,e){if(!e)return document.__importNode(t,e);let n=[].slice.call(t.querySelectorAll("template")),i=document.__importNode(t,e);return i.querySelectorAll("template").forEach((t,e)=>{t.innerHTML=n[e].innerHTML}),i});var d=n(3);class f{constructor(t,e){this.context=t,this.model=e,this.paths={},this.annotations=[]}annotate(t){this.annotations.push(t)}walkEffect(t,e){this.annotations.forEach(n=>{n.effect(t,e)}),Object.keys(this.paths).forEach(n=>{this.paths[n].walkEffect(t,e)})}}class m{static test(t,e){}constructor(t,e){this.node=t,this.name=e}set(t){"function"==typeof this.node.set?this.node.set(this.name,t):this.node[this.name]=t}get(){return"function"==typeof this.node.get?this.node.get(this.name):this.node[this.name]}}const{TEXT_NODE:_,ELEMENT_NODE:g}=window.Node;const{TEXT_NODE:y,ELEMENT_NODE:w}=window.Node;const{ELEMENT_NODE:v}=window.Node;const b=[class extends m{static test(t,e){return"value"===e&&t.nodeType===w&&"INPUT"===t.nodeName||!(t.nodeType!==y||!t.parentElement||"TEXTAREA"!==t.parentElement.nodeName)||void 0}constructor(t){super(t,"value"),t.nodeType===y&&t.parentElement&&"TEXTAREA"===t.parentElement.nodeName&&(this.node=t.parentElement)}set(t=""){document.activeElement!==this.node&&super.set(t)}},class extends m{static test(t,e){return t.nodeType===_||"text"===e&&t.nodeType===g}constructor(t){super(t,"textContent")}set(t=""){t!==this.node.textContent&&(this.node.textContent=t)}},class extends m{static test(t,e){return"html"===e&&t.nodeType===window.Node.ELEMENT_NODE}set(t=""){this.node.innerHTML=t}get(){return this.node.innerHTML}},class extends m{static test(t,e){return e&&e.startsWith("class.")}constructor(t,e){super(t,e.split(".").splice(1).join("."))}set(t){t?this.node.classList.add(this.name):this.node.classList.remove(this.name)}get(){throw new Error("Unimplemented")}},class extends m{static test(t,e){return e&&e.startsWith("style.")}constructor(t,e){super(t,e.split(".").splice(1).join("."))}set(t=""){this.node.style[this.name]=t}get(){throw new Error("Unimplemented")}},class extends m{static test(t,e){return t.nodeType===window.Node.ELEMENT_NODE&&e.endsWith("$")}constructor(t,e){super(t,e.slice(0,-1))}set(t){t?t!==this.node.getAttribute(this.name)&&this.node.setAttribute(this.name,t):this.node.removeAttribute(this.name)}get(){return this.node.getAttribute(this.name)}},class extends m{static test(t,e){return t.nodeType===v}constructor(t,e){super(),this.node=t,this.name=function(t){let e=l[t];return e||(t.indexOf("-")<0?l[t]=t:l[t]=t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()}),l[t])}(e)}}],C={get(t,e){let n=b.find(n=>n.test(t,e));if(n)return new n(t,e);throw new Error(`Unimplemented resolving accessor for nodeType: ${t.nodeType} name: ${e}`)}};var E=n(6);const x=Object(o.a)();function A(t,e,n){this.__templateInitialize(t,e,n),this.__templateRender()}A.prototype={get $(){return this.__templateHost.getElementsByTagName("*")},$$(t){return this.querySelector(t)},on(){Object(i.f)(this.__templateHost||this).on(...arguments)},off(){Object(i.f)(this.__templateHost||this).off(...arguments)},once(){Object(i.f)(this.__templateHost||this).once(...arguments)},waitFor(){return Object(i.f)(this.__templateHost||this).waitFor(...arguments)},all(t){for(let e in t)t.hasOwnProperty(e)&&this.set(e,t[e])},get(t){let e=this;return this.__templateGetPathAsArray(t).some(t=>void 0===e||null===e?(e=void 0,!0):(e=e[t],!1)),e},set(t,e){if(1===arguments.length&&"object"==typeof t){let e=t;for(let t in e)e.hasOwnProperty(t)&&this.set(t,e[t]);return}if(t=this.__templateGetPathAsArray(t),e===this.get(t))return;let n=this;t.slice(0,-1).forEach(t=>{n&&(void 0!==n[t]&&null!==n[t]||(n[t]={}),n=n[t])});let i=t.slice(-1).pop();n[i]=e,this.notify(t,e)},push(t,...e){let n=this;(t=this.__templateGetPathAsArray(t)).slice(0,-1).forEach(t=>{n&&(void 0!==n[t]&&null!==n[t]||(n[t]={}),n=n[t])});let i=t.slice(-1).pop();Array.isArray(n[i])||(n[i]=[]),n[i]=n[i].slice();let s=n[i].push(...e);return this.notify(t,n[i]),s},pop(t){let e=this;(t=this.__templateGetPathAsArray(t)).slice(0,-1).forEach(t=>{e&&(void 0!==e[t]&&null!==e[t]||(e[t]={}),e=e[t])});let n=t.slice(-1).pop();Array.isArray(e[n])||(e[n]=[]),e[n]=e[n].slice();let i=e[n].pop();return this.notify(t,e[n]),i},splice(t,e,n,...i){let s=this;(t=this.__templateGetPathAsArray(t)).slice(0,-1).forEach(t=>{s&&(void 0!==s[t]&&null!==s[t]||(s[t]={}),s=s[t])});let r=t.slice(-1).pop();Array.isArray(s[r])||(s[r]=[]),s[r]=s[r].slice();let o=s[r].splice(e,n,...i);return this.notify(t,s[r]),o},notify(t,e){if(t=this.__templateGetPathAsString(t),!this.__templateReady)return this.__templateNotifyOnReady=this.__templateNotifyOnReady||[],void(-1===this.__templateNotifyOnReady.indexOf(t)&&this.__templateNotifyOnReady.push(t));let n=this.__templateGetBinding(t);n&&(void 0===e&&(e=this.get(t)),n.walkEffect("set",e))},__templateInitialize(t,e,n){this.__templateId=x(),this.__templateBindings={},this.__templateHost=e||(t?t.parentElement:null),this.__templateMarker=n,this.__templateReady=!1,this.__templateNotifyOnReady=[],t&&(this.__template=function(t){return!t.content&&window.HTMLTemplateElement&&window.HTMLTemplateElement.decorate&&window.HTMLTemplateElement.decorate(t),t}(t),this.__templateChildNodes=[],this.__templateFragment=document.importNode(this.__template.content,!0),this.__parseAnnotations(),n||(this.__template.parentElement===this.__templateHost?this.__templateMarker=this.__template:(this.__templateMarker=document.createComment(`marker-${this.__templateId}`),this.__templateHost.appendChild(this.__templateMarker))))},__templateRender(t){if(this.__templateReady=!0,this.__templateNotifyOnReady.forEach(t=>{this.notify(t,this.get(t))}),this.__templateNotifyOnReady=[],!this.__template)return;let e=this.__templateFragment;this.__templateFragment=null,t&&t instanceof window.DocumentFragment&&e.querySelectorAll("slot").forEach(n=>{let i=function(t){return h?t.name:t.getAttribute("name")}(n),s=n.parentElement||e,r=document.createComment(`slot ${i}`);s.insertBefore(r,n),s.removeChild(n),i?t.querySelectorAll(`[slot="${i}"]`).forEach(t=>{s.insertBefore(t,r)}):s.insertBefore(t,r)}),this.__templateMarker.parentElement.insertBefore(e,this.__templateMarker)},__templateUninitialize(){this.__templateChildNodes.forEach(t=>{t.parentElement.removeChild(t)})},__templateGetPathAsArray:t=>"string"!=typeof t?t:t.split("."),__templateGetPathAsString:t=>"string"==typeof t?t:t.join("."),__parseAnnotations(){this.__templateChildNodes=[...this.__templateFragment.childNodes];let t=this.__templateChildNodes.length;for(let e=0;e<t;e++){let t=this.__templateChildNodes[e];switch(t.nodeType){case window.Node.ELEMENT_NODE:this.__parseElementAnnotations(t);break;case window.Node.TEXT_NODE:this.__parseTextAnnotations(t)}}},__parseEventAnnotations(t,e){let n=t.getAttribute(e),i=e.slice(1,-1);"tap"===i&&(i="click");let s=this,r=d.a.getFn(n,[],!0);this.on(i,t,t=>{r.invoke(s,{evt:t})})},__parseAttributeAnnotations(t){let e=!1,n=t.attributes.length;for(let i=0;i<n;i++){let n=t.attributes[i],s=n.name;"id"!==s&&"class"!==s&&"style"!==s&&(0===s.indexOf("(")?this.__parseEventAnnotations(t,s):e=this.__templateAnnotate(d.a.get(n.value),C.get(t,s))||e)}return e},__parseElementAnnotations(t){let e=!1;if(t.__templateModel)return e;if(t.__templateModel=this,t.attributes&&t.attributes.length&&(e=this.__parseAttributeAnnotations(t)||e),t.childNodes&&t.childNodes.length){let n=[].slice.call(t.childNodes),i=n.length;for(let t=0;t<i;t++)e=this.__parseNodeAnnotations(n[t])||e}return t.querySelectorAll("slot").forEach(t=>{t.childNodes.forEach(t=>{e=this.__parseNodeAnnotations(t)||e})}),e},__parseNodeAnnotations(t){switch(t.nodeType){case window.Node.TEXT_NODE:return this.__parseTextAnnotations(t);case window.Node.ELEMENT_NODE:return this.__parseElementAnnotations(t)}},__parseTextAnnotations(t){let e=d.a.get(t.textContent),n=C.get(t);return this.__templateAnnotate(e,n)},__templateAnnotate(t,e){if("s"===t.type)return!1;if(t.constant){let n=t.invoke(this);return e.set(n),!1}let n=new E.a(this,t,e);return"m"===t.type&&this.__templateGetBinding(t.fn.name).annotate(n),t.vpaths.forEach(t=>{this.__templateGetBinding(t.name).annotate(n)}),!0},__templateGetBinding(t){let e,n,i=t.split(".");for(let t=0;t<i.length;t++){let s=i[t];(e=n?n.paths:this.__templateBindings)[s]||(e[s]=new f(this,s)),n=e[s]}return n}};var F=n(2);const N=n(9)("xin::component"),O=Object(o.a)(),j={};function k(t){const e=Object(i.g)();if(j[t])return j[t];let n;"v1"===e.get("customElements.version")?n=window[t]:(n=function(){}).prototype=Object.create(window[t].prototype);class s extends n{constructor(){super(),this.is=this.nodeName.toLowerCase(),this.createdCallback()}get $(){return this.__templateHost.getElementsByTagName("*")}created(){}ready(){}attached(){}detached(){}createdCallback(){N.enabled&&N(`CREATED ${this.is}`),this.__id=O(),this.created(),this.__initData()}readyCallback(){let t;this.__componentReady=!0,this.fire("before-ready"),N.enabled&&N(`READY ${this.is}`),this.hasAttribute("xin-id")||this.setAttribute("xin-id",this.__id),this.__initListeners(),this.__initTemplate(),this.__initProps(),this.__initPropValues(),this.__template&&(t=document.createDocumentFragment(),[].slice.call(this.childNodes).forEach(e=>{e!==this.__templateMarker&&t.appendChild(e)})),this.__templateRender(t),this.ready(),this.fire("ready"),this.__componentAttaching&&this.attachedCallback()}attachedCallback(){this.__repository.put(this.__id,this),this.__componentAttaching=!0,this.__componentReady?(this.notify("__global"),this.notify("__repository"),this.notify("__app"),N.enabled&&N(`ATTACHED ${this.is} ${this.__componentAttaching?"(delayed)":""}`),this.attached(),this.__componentAttaching=!1):this.__componentBeforeReady||(this.__componentBeforeReady=!0,this.async(this.readyCallback))}detachedCallback(){this.__repository.remove(this.__id),this.detached()}connectedCallback(){return this.attachedCallback()}disconnectedCallback(){return this.detachedCallback()}get __app(){if(!this.__app$)if(this.__appSignature)this.__app$=this;else{let t=this.parentElement;for(;t&&!t.__appSignature;)t=t.parentElement;this.__app$=t}return this.__app$}get __global(){return window}get __repository(){return e}__initData(){this.__componentContent=[],this.__componentDebouncers={},this.__componentNotifiers={},this.__componentReady=!1,this.__componentBeforeReady=!1,this.__componentAttaching=!1,this.__componentInitialPropValues={},this.__componentNotifiedProps={}}__initProps(){let t=this.__getProps();for(let e in t){let n=t[e],i=c(e);if("computed"in n){let t=C.get(this,e),i=d.a.getFn(n.computed,[],!0);this.__templateAnnotate(i,t),this.__componentInitialPropValues[e]=(()=>i.invoke(this))}else if(this.hasAttribute(i)){let t=this.getAttribute(i),s=d.a.get(t);"s"===s.type?this.__componentInitialPropValues[e]=(()=>u(t,n.type)):("notify"in n&&"{"===s.mode&&(this.__componentNotifiedProps[e]=!0,this.__templateGetBinding(e).annotate(new E.b(this,e))),this.__componentInitialPropValues[e]=(()=>s.invoke(this.__templateModel)))}if("observer"in n){let t=d.a.getFn(n.observer,[e],!0);this.__templateAnnotate(t)}}}__getProps(){return this._props||(this._props=this.props),this._props}__initPropValues(){let t=this.__getProps();for(let e in t){let n,i=t[e];if(n=this.__componentInitialPropValues[e]?this.__componentInitialPropValues[e]():this[e],"value"in i&&T(e,n)&&(n=p(i.value)),i.required&&void 0===n)throw new Error(`${this.is}:${this.__id} missing required ${e}`);this[e]=n,void 0!==n&&this.notify(e,n)}}__isNotified(t){return t in this.__componentNotifiedProps}__initTemplate(){let t;1!==this.childElementCount||"TEMPLATE"!==this.firstElementChild.nodeName||this.firstElementChild.hasAttribute("is")?this.template&&((t=document.createElement("template")).innerHTML=this.template):(t=this.firstElementChild,this.removeChild(t)),this.__templateInitialize(t,this)}__initListeners(){this.listeners&&Object.keys(this.listeners).forEach(t=>{let e=function(t){t=t.trim();let[e,...n]=t.split(/\s+/),i=n.length?n.join(" "):null;return{key:t,eventName:e,selector:i}}(t),n=d.a.getFn(this.listeners[t],[],!0);e.selector?this.on(e.eventName,e.selector,t=>{n.invoke(this,{evt:t})}):this.on(e.eventName,t=>{n.invoke(this,{evt:t})})})}__addNotifier(t){this.__componentNotifiers[t]||(this.__componentNotifiers[t]=(t=>{let e=t.target;e.__templateModel===this&&(t.stopImmediatePropagation(),"__componentNotifyKey"in e&&"__componentNotifyAccessor"in e&&e.__templateModel.set(e.__componentNotifyKey,e[e.__componentNotifyAccessor]))}),this.on(t,this.__componentNotifiers[t]))}__removeNotifier(t){this.__componentNotifiers[t]&&(this.off(t,this.__componentNotifiers[t]),delete this.__componentNotifiers[t])}fire(t,e,n){return Object(i.f)(this).fire(t,e,n)}async(t,e){return new F.a(this).start(t,e)}debounce(t,e,n,i){let s=this.__componentDebouncers[t];return s&&s.running?s.cancel():s=this.__componentDebouncers[t]=new F.b(this,i),s.start(e,n),s}nextFrame(t){return F.a.nextFrame(t.bind(this))}__templateAnnotate(t,e){if(!A.prototype.__templateAnnotate.call(this,t,e))return!1;if("{"===t.mode&&"p"===t.type&&e.node instanceof window.HTMLElement){const n=e.node,i=n.nodeName,s=i=>{n.__componentNotifyKey=t.name,n.__componentNotifyAccessor=e.name,this.__addNotifier(i)};if("INPUT"===i){const t=n.getAttribute("type");if("radio"===t||"checkbox"===t)throw new Error("Unimplemented yet");s("input")}else"TEXTAREA"===i?s("input"):"SELECT"===i&&s("change")}return!0}}let r=A.prototype;for(let t in r)r.hasOwnProperty(t)&&"$"!==t&&"__templateAnnotate"!==t&&(s.prototype[t]=r[t]);return j[t]=s,s}function T(t,e){return void 0===e||"title"===t&&!e}const $=k("HTMLElement");var S=n(10);n.d(e,"e",function(){return r}),n.d(e,"d",function(){return k}),n.d(e,"a",function(){return $}),n.d(e,"c",function(){return A}),n.d(e,"b",function(){return S.a})},function(t,e,n){"use strict";const i=n(9)("xin::core");class s{constructor(t={}){i.enabled&&i("Repository construct..."),this.data=Object.assign({"customElements.version":"v1"},t)}update(t={}){i.enabled&&i("Repository update data..."),this.data=Object.assign(this.data,t)}get(t){return this.data[t]}put(t,e){if(void 0===e)return this.remove(t);this.data[t]=e}remove(t){delete this.data[t]}}function r(t){window.xin=window.xin||{};let e=window.xin.__repository;return e?e.update(t):e=window.xin.__repository=new s(t),e}function o(){window.xin&&window.xin.__repository||r();let t=window.xin.__repository;if("function"!=typeof t.update)throw new Error("Invalid global xin repository found!");return t}var a=n(5);const c=Object(a.a)();let l,h=0,u=0,p={},d={};function f(t,e,n){return"_root"===e?n:t!==n?function(t){return l||(l=t.matches?t.matches:t.webkitMatchesSelector?t.webkitMatchesSelector:t.mozMatchesSelector?t.mozMatchesSelector:t.msMatchesSelector?t.msMatchesSelector:t.oMatchesSelector?t.oMatchesSelector:C.matchesSelector)}(t).call(t,e)?t:t.parentNode?(h++,f(t.parentNode,e,n)):void 0:void 0}function m(t,e,n,i){p[t.id]||(p[t.id]={}),p[t.id][e]||(p[t.id][e]={}),p[t.id][e][n]||(p[t.id][e][n]=[]),p[t.id][e][n].push(i)}function _(t,e,n,i){if(p[t.id])if(e)if(i||n)if(i){if(p[t.id][e][n])for(let s=0;s<p[t.id][e][n].length;s++)if(p[t.id][e][n][s]===i){p[t.id][e][n].splice(s,1);break}}else delete p[t.id][e][n];else p[t.id][e]={};else for(let e in p[t.id])p[t.id].hasOwnProperty(e)&&(p[t.id][e]={})}const g={},y=t=>[t],w={transitionend(t){let e=document.createElement("fakeelement"),n={OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",transition:"transitionend"};for(let t in n)if(void 0!==e.style[t])return[n[t]]}};function v(t){let e;if(t in g)e=g[t];else{e=(w[t]||y)(t),g[t]=e}return e}function b(t,e,n,i){if(!this.element)return;if(t instanceof Array||(t=[t]),n||"function"!=typeof e||(n=e,e="_root"),e instanceof window.Element){let t;e.hasAttribute("bind-event-id")?t=e.getAttribute("bind-event-id"):(t=c(),e.setAttribute("bind-event-id",t)),e=`[bind-event-id="${t}"]`}let s,r=this.id;function o(t){return function(e){!function(t,e,n){if(!p[t][n])return;let i,s,r=e.target||e.srcElement,o={},a=0,c=0;for(i in h=0,p[t][n])p[t][n].hasOwnProperty(i)&&(s=f(r,i,d[t].element))&&C.matchesEvent(n,d[t].element,s,"_root"===i,e)&&(h++,p[t][n][i].match=s,o[h]=p[t][n][i]);for(e.stopPropagation=function(){e.cancelBubble=!0},a=0;a<=h;a++)if(o[a])for(c=0;c<o[a].length;c++){if(!1===o[a][c].call(o[a].match,e))return void C.cancel(e);if(e.cancelBubble)return}}(r,e,t)}}for(s=0;s<t.length;s++)v(t[s]).forEach(t=>{i?_(this,t,e,n):(p[r]&&p[r][t]||C.addEvent(this,t,o(t)),m(this,t,e,n))});return this}function C(t,e){this.element=t,this.id=e}function E(t){for(let e in d)if(d[e].element===t)return d[e];return d[++u]=new C(t,u),d[u]}C.prototype.on=function(t,e,n){return b.call(this,t,e,n)},C.prototype.off=function(t,e,n){return b.call(this,t,e,n,!0)},C.prototype.once=function(t,e,n){n||"function"!=typeof e||(n=e,e="_root");const i=(...s)=>(this.off(t,e,i),n(...s));return this.on(t,e,i)},C.prototype.waitFor=function(t,e=3e3){return new Promise((n,i)=>{let s,r=t=>{clearTimeout(s),n(t)};e>0&&(s=setTimeout(()=>{this.off(t,r),i(new Error("Event#waitFor got timeout"))},e)),this.once(t,r)})},C.prototype.fire=function(t,e,n){let i;n=n||{},e=e||{};let s=void 0===n.bubbles||n.bubbles,r=Boolean(n.cancelable);switch(t){case"click":i=new window.Event(t,{bubbles:s,cancelable:r,detail:e});break;default:i=new window.CustomEvent(t,{bubbles:Boolean(s),cancelable:r,detail:e})}return this.element.dispatchEvent(i),i},C.matchesSelector=function(){},C.cancel=function(t){t.preventDefault(),t.stopPropagation()},C.addEvent=function(t,e,n){if("touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e)return void t.element.addEventListener(e,n,{passive:!0});let i="blur"===e||"focus"===e;t.element.addEventListener(e,n,i)},C.aliases=v,C.matchesEvent=function(){return!0};var x=n(2);class A{static add(t,e){F[t]=e}static get(t){return F[t]||F.none}constructor(t){t=t||{},this.element=t.element,this.duration=t.duration||0,this.transition=t.transition||"none",this.method=t.method||"",this.adapter=t.adapter||A.get(this.transition),this.running=!1,this.direction=0}async play(t){this.running=!0,this.direction=t,await this.adapter.play(this)}async stop(){await this.adapter.stop(this),this.running=!1,this.direction=0}}const F={none:{async play(){},async stop(){}},slide:{play:t=>new Promise(e=>{E(t.element).once("transitionend",()=>{t.element.classList.remove("trans-slide__animate"),e()}),t.element.classList.add(`trans-slide__${t.method}-${t.direction>0?"left":"right"}`),x.a.nextFrame(()=>{t.element.classList.add("trans-slide__animate"),x.a.nextFrame(()=>t.element.classList.add(`trans-slide__${t.method}`))})}),stop:t=>new Promise(e=>{x.a.nextFrame(()=>{t.element.classList.remove(`trans-slide__${t.method}-${t.direction>0?"left":"right"}`),t.element.classList.remove(`trans-slide__${t.method}`),e()})})},fade:{play:t=>new Promise(e=>{E(t.element).once("transitionend",()=>{e()}),t.element.classList.add(`trans-fade__${t.method}`),x.a.nextFrame(()=>{t.element.classList.add(`trans-fade__${t.method}-animate`)})}),stop:t=>new Promise(e=>{t.element.classList.remove(`trans-fade__${t.method}`),x.a.nextFrame(()=>{t.element.classList.remove(`trans-fade__${t.method}-animate`),e()})})}};n.d(e,"e",function(){return r}),n.d(e,"g",function(){return o}),n.d(e,"d",function(){return s}),n.d(e,"f",function(){return E}),n.d(e,"c",function(){return A}),n.d(e,"a",function(){return x.a}),n.d(e,"b",function(){return x.b})},function(t,e,n){"use strict";var i=n(4);class s{constructor(t,e){this.context=t,this.immediate=Boolean(e),this.async=null,this.running=!1}start(t,e){if(this.immediate)throw new Error("Unimplemented yet!");this.running=!0,this.async=new i.a(this.context),this.async.start(()=>{t.call(this.context),this.running=!1,this.async=null},e)}cancel(){this.running=!1,this.async.cancel(),this.async=null}}n.d(e,"a",function(){return i.a}),n.d(e,"b",function(){return s})},function(t,e,n){"use strict";const i={};class s{static get CACHE(){return i}static get(t){if(t in i)return i[t];let e=new s(t);return i[t]=e,e}constructor(t){if(this.name=t,this.contextName="",this.baseName="",this._value=null,this.type="v",!this.name.match(/^[a-zA-Z_]/))try{return this._value=JSON.parse(this.name),void(this.type="s")}catch(t){}if("v"===this.type){let t=this.name.split(".");this.baseName=t.pop(),this.contextName=t.join(".")}}value(...t){if("s"===this.type)return this._value;for(let e of t){if(!e)continue;let t="function"==typeof e.get?e.get(this.name):e[this.name];if(void 0!==t)return t}}invoke(t,...e){if(0===e.length)throw new Error(`Cannot invoke method ${this.name} of undefined context`);if("s"===this.type){let[t]=e;throw new Error(`Method is not eligible, ${t.__templateHost.nodeName||"$anonymous"}#${this.name}`)}for(let n of e)if(n)if("function"==typeof n.get){let e=this.contextName?n.get(this.contextName):n;if("function"==typeof e[this.baseName])return e[this.baseName](...t)}else if("function"==typeof n[this.name])return n[this.name].apply(n,t);let[n]=e;throw new Error(`Method is not eligible, ${n.__templateHost.nodeName||"$anonymous"}#${this.name}`)}}var r=n(10);n.d(e,"a",function(){return c});const o={s:{"[":{},"{":{}},v:{"[":{},"{":{}}};function a(t,e,n){let i=o[n][e];if(t in i)return i[t];let s=new c(t,e,n);return"s"!==n&&(i[t]=s),s}class c{static get CACHE(){return o}static get(t,e){if(t=(t||"").trim(),e)return a(t,"[","v");let n=t[0];return"["!==n&&"{"!==n||t[1]!==n?a(t,"[","s"):a(t=t.slice(2,-2).trim(),n,"v")}static getFn(t,e,n){return c.get(-1===t.indexOf("(")?`${t}(${e.join(", ")})`:t,n)}static rawTokenize(t){let e=0,n=[];for(;t&&e++<10;){let e=t.match(/^\s*("[^"]*"|[^,]+),?/);t=t.substr(e[0].length),n.push(e[1].trim())}return n}static tokenize(t){return c.rawTokenize(t).map(t=>s.get(t))}constructor(t,e,n){if(this.mode=e,this.type=n,this.name="",this.args=[],this.filters=[],this.value=t,"s"===n)return;let i=t.split("|"),o=i[0].trim();if(this.filters=i.slice(1).map(t=>r.a.get(t.trim())),o.indexOf("(")<0)this.type="p",this.name=o,this.args.push(s.get(o));else{this.mode="[",this.type="m";let t=o.match(/([^(]+)\(([^)]*)\)/);this.name=t[1].trim(),this.fn=s.get(this.name),this.args=c.tokenize(t[2])}}get constant(){return"m"!==this.type&&this.vpaths.length!==this.args.length}get vpaths(){if(!this._vpaths){let t=[];this.args.forEach(e=>{"v"===e.type&&-1===t.indexOf(e.name)&&t.push(e)}),this._vpaths=t}return this._vpaths}invoke(t,e){if("p"===this.type){let n=this.args[0].value(t,e);return this.filters.reduce((t,e)=>e.invoke(t),n)}let n=this.args.map(n=>n.value(t,e));return this.fn.invoke(n,t,t.__templateHost)}}},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n(5);const s=Object(i.a)(),r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,o=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.msCancelAnimationFrame;class a{static nextFrame(t){return r(t)}static sleep(t){return new Promise(e=>{setTimeout(()=>this.nextFrame(e),t)})}static run(t,e){return(new a).start(t,e)}constructor(t){this.id=s(),this.context=t,this.cleared=!0}start(t,e){if("function"!=typeof t)throw new Error("Async should specify function");if(!this.cleared)throw new Error("Async already run");this.cleared=!1;let n=this,i=this.context,s=function(){n.frameHandle=r(()=>{n.__clear(),t.call(i)})};e?this.handle=setTimeout(s,e):s()}__clear(){this.cleared=!0,o(~~this.frameHandle),clearTimeout(~~this.handle),this.handle=this.frameHandle=void 0}cancel(){this.__clear()}}},function(t,e,n){"use strict";function i(){let t=0;return function(){return t++}}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";class i{constructor(t,e,n){this.model=t,this.expr=e,this.accessor=n}effect(t,e){this.accessor?this.accessor.set(this.expr.invoke(this.model)):this.expr.invoke(this.model)}}var s=n(3);class r{constructor(t,e){let n=s.a.get(t.getAttribute(e));this.model=t,this.name=n.name}effect(t,e){this.model.__templateModel.set(this.name,e)}}n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r})},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n(0);class s extends i.a{attached(){super.attached(),this.__app.use(this.callback())}}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});class i{static routeRegExp(t){let e=t.split("[");if(e.length>2)throw new Error("Invalid use of optional params");let n=[],i=e[0].replace(/{([^}]+)}/g,function(t,e){return n.push(e),"([^/]+)"}).replace(/\//g,"\\/"),s="";return e[1]&&(s="(?:"+e[1].slice(0,-1).replace(/{([^}]+)}/g,function(t,e){let[i,s="[^/]+"]=e.split(":");return n.push(i),`(${s})`}).replace(/\//g,"\\/")+")?"),[new RegExp("^"+i+s+"$"),n]}static isStatic(t){return!t.match(/[[{]/)}constructor(t,e){if(this.route=t,this.callback=e,i.isStatic(t))this.type="s",this.pattern=null,this.args=[];else{let e=i.routeRegExp(t);this.type="v",this.pattern=e[0],this.args=e[1]}}getExecutorFor(t){if("s"===this.type){if(t===this.route)return{handler:this,args:{}}}else if("v"===this.type){let e=t.match(this.pattern);if(e)return{handler:this,args:this.args.reduce((t,n,i)=>(t[n]=e[i+1],t),{})}}}}},function(t,e,n){(function(i){e.log=function(...t){return"object"==typeof console&&console.log&&console.log(...t)},e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let i=0,s=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&"%c"===t&&(s=++i)}),e.splice(s,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&void 0!==i&&"env"in i&&(t=i.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=n(34)(e);const{formatters:s}=t.exports;s.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this,n(33))},function(t,e,n){"use strict";const i={};class s{constructor(t,e,n){this.name=t,this.callback=e,this.otherArgs=n}invoke(t){let e=[t];return[].push.apply(e,this.otherArgs),this.callback.apply(null,e)}static put(t,e){i[t]=e}static get(t){let e=t.split(":"),r=e.splice(1).join(":").split(","),o=e.pop(),a=i[o];if("function"!=typeof a)try{a=n(36)(`./${o}`).default}catch(t){}if(!a)throw new Error(`Filter "${t}" not found.`);return new s(o,a,r)}}n.d(e,"a",function(){return s})},function(t,e,n){"use strict";e.decode=e.parse=n(41),e.encode=e.stringify=n(42)},function(t,e,n){"use strict";n.r(e),e.default=function(t){return`${Boolean(t)}`}},function(t,e,n){"use strict";n.r(e),e.default=(t=>console.error(t))},function(t,e,n){"use strict";n.r(e),e.default=(t=>console.info(t))},function(t,e,n){"use strict";n.r(e),e.default=(t=>console.log(t))},function(t,e,n){"use strict";n.r(e),e.default=(t=>console.trace(t))},function(t,e,n){"use strict";n.r(e),e.default=(t=>console.warn(t))},function(t,e,n){"use strict";n.r(e),e.default=function(t){return`url(${t})`}},function(t,e,n){"use strict";n.r(e),e.default=function(t){return(t||0).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e){return t||e}},function(t,e,n){"use strict";n.r(e),e.default=((t,e)=>JSON.stringify(t,null,Number(e)))},function(t,e,n){"use strict";n.r(e),e.default=function(t){return String(t||"").toLowerCase()}},function(t,e,n){"use strict";n.r(e),e.default=function(t){return Boolean(!t)}},function(t,e,n){"use strict";n.r(e),e.default=function(t){return Number(t||0).toLocaleString()}},function(t,e,n){"use strict";n.r(e),e.default=function(t){if(void 0===t||null===t||""===t)throw new Error("Value is required");return t}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e,n){return Array.prototype.slice.call(t||[],e,n)}},function(t,e,n){"use strict";n.r(e),e.default=function(t){return void 0===t||null===t?"":String(t)}},function(t,e,n){"use strict";n.r(e),e.default=function(t){return String(t||"").toUpperCase()}},function(t,e,n){"use strict";n.r(e);var i=n(0),s=n(1);class r extends i.a{get props(){const t=this.__repository.get("view.transitionIn")||this.__repository.get("view.transition")||"slide",e=this.__repository.get("view.transitionOut")||this.__repository.get("view.transition")||"fade";return Object.assign({},super.props,{uri:{type:String,required:!0},transitionIn:{type:String,value:t},transitionOut:{type:String,value:e},title:{type:String,value:()=>`View ${this.uri}`}})}focusing(){}focused(){}blurred(){}created(){super.created(),this.classList.add("xin-view")}ready(){super.ready(),this.inFx=new s.c({element:this,transition:this.transitionIn,method:"in"}),this.outFx=new s.c({element:this,transition:this.transitionOut,method:"out"})}attached(){super.attached(),this.classList.remove("xin-view--focus"),this.classList.remove("xin-view--visible"),this.__app?(this.__app.route(this.uri,t=>{this.focus(t)}),this.fire("routed")):console.error("Cannot route view to undefined app")}async focus(t={}){this.set("parameters",t),await this.focusing(t),this.fire("focusing",t),this.async(()=>{"setFocus"in this.parentElement?this.parentElement.setFocus(this):(this.setVisible(!0),this.setFocus(!0))})}setVisible(t){if(t)return this.classList.add("xin-view--visible"),void this.fire("show",{view:this});this.classList.remove("xin-view--visible"),this.querySelectorAll(".xin-view.xin-view--visible").forEach(e=>e.setVisible(t)),this.fire("hide",{view:this})}async setFocus(t){if(t)return this.classList.add("xin-view--focus"),await this.focused(),void this.fire("focus",{view:this});this.classList.remove("xin-view--focus"),this.querySelectorAll(".xin-view.xin-view--focus").forEach(e=>{"setFocus"in e.parentElement?e.parentElement.setFocus(null):e.setFocus(t)}),await this.blurred(),this.fire("blur",{view:this})}}Object(i.e)("xin-view",r),n.d(e,"View",function(){return r})},function(t,e,n){"use strict";var i=n(37),s=n(40);function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=w,e.resolve=function(t,e){return w(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?w(t,!1,!0).resolveObject(e):e},e.format=function(t){s.isString(t)&&(t=w(t));return t instanceof r?t.format():r.prototype.format.call(t)},e.Url=r;var o=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),h=["'"].concat(l),u=["%","/","?",";","#"].concat(h),p=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},_={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(11);function w(t,e,n){if(t&&s.isObject(t)&&t instanceof r)return t;var i=new r;return i.parse(t,e,n),i}r.prototype.parse=function(t,e,n){if(!s.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),a=-1!==r&&r<t.indexOf("#")?"?":"#",l=t.split(a);l[0]=l[0].replace(/\\/g,"/");var w=t=l.join(a);if(w=w.trim(),!n&&1===t.split("#").length){var v=c.exec(w);if(v)return this.path=w,this.href=w,this.pathname=v[1],v[2]?(this.search=v[2],this.query=e?y.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var b=o.exec(w);if(b){var C=(b=b[0]).toLowerCase();this.protocol=C,w=w.substr(b.length)}if(n||b||w.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===w.substr(0,2);!E||b&&_[b]||(w=w.substr(2),this.slashes=!0)}if(!_[b]&&(E||b&&!g[b])){for(var x,A,F=-1,N=0;N<p.length;N++){-1!==(O=w.indexOf(p[N]))&&(-1===F||O<F)&&(F=O)}-1!==(A=-1===F?w.lastIndexOf("@"):w.lastIndexOf("@",F))&&(x=w.slice(0,A),w=w.slice(A+1),this.auth=decodeURIComponent(x)),F=-1;for(N=0;N<u.length;N++){var O;-1!==(O=w.indexOf(u[N]))&&(-1===F||O<F)&&(F=O)}-1===F&&(F=w.length),this.host=w.slice(0,F),w=w.slice(F),this.parseHost(),this.hostname=this.hostname||"";var j="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!j)for(var k=this.hostname.split(/\./),T=(N=0,k.length);N<T;N++){var $=k[N];if($&&!$.match(d)){for(var S="",L=0,P=$.length;L<P;L++)$.charCodeAt(L)>127?S+="x":S+=$[L];if(!S.match(d)){var M=k.slice(0,N),R=k.slice(N+1),I=$.match(f);I&&(M.push(I[1]),R.unshift(I[2])),R.length&&(w="/"+R.join(".")+w),this.hostname=M.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),j||(this.hostname=i.toASCII(this.hostname));var q=this.port?":"+this.port:"",H=this.hostname||"";this.host=H+q,this.href+=this.host,j&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==w[0]&&(w="/"+w))}if(!m[C])for(N=0,T=h.length;N<T;N++){var U=h[N];if(-1!==w.indexOf(U)){var D=encodeURIComponent(U);D===U&&(D=escape(U)),w=w.split(U).join(D)}}var z=w.indexOf("#");-1!==z&&(this.hash=w.substr(z),w=w.slice(0,z));var B=w.indexOf("?");if(-1!==B?(this.search=w.substr(B),this.query=w.substr(B+1),e&&(this.query=y.parse(this.query)),w=w.slice(0,B)):e&&(this.search="",this.query={}),w&&(this.pathname=w),g[C]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){q=this.pathname||"";var V=this.search||"";this.path=q+V}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",i=this.hash||"",r=!1,o="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&s.isObject(this.query)&&Object.keys(this.query).length&&(o=y.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||g[e])&&!1!==r?(r="//"+(r||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):r||(r=""),i&&"#"!==i.charAt(0)&&(i="#"+i),a&&"?"!==a.charAt(0)&&(a="?"+a),e+r+(n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(a=a.replace("#","%23"))+i},r.prototype.resolve=function(t){return this.resolveObject(w(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(s.isString(t)){var e=new r;e.parse(t,!1,!0),t=e}for(var n=new r,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];n[a]=this[a]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var c=Object.keys(t),l=0;l<c.length;l++){var h=c[l];"protocol"!==h&&(n[h]=t[h])}return g[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!g[t.protocol]){for(var u=Object.keys(t),p=0;p<u.length;p++){var d=u[p];n[d]=t[d]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||_[t.protocol])n.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var m=n.pathname||"",y=n.search||"";n.path=m+y}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var w=n.pathname&&"/"===n.pathname.charAt(0),v=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=v||w||n.host&&t.pathname,C=b,E=n.pathname&&n.pathname.split("/")||[],x=(f=t.pathname&&t.pathname.split("/")||[],n.protocol&&!g[n.protocol]);if(x&&(n.hostname="",n.port=null,n.host&&(""===E[0]?E[0]=n.host:E.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),b=b&&(""===f[0]||""===E[0])),v)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,E=f;else if(f.length)E||(E=[]),E.pop(),E=E.concat(f),n.search=t.search,n.query=t.query;else if(!s.isNullOrUndefined(t.search)){if(x)n.hostname=n.host=E.shift(),(j=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=j.shift(),n.host=n.hostname=j.shift());return n.search=t.search,n.query=t.query,s.isNull(n.pathname)&&s.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!E.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var A=E.slice(-1)[0],F=(n.host||t.host||E.length>1)&&("."===A||".."===A)||""===A,N=0,O=E.length;O>=0;O--)"."===(A=E[O])?E.splice(O,1):".."===A?(E.splice(O,1),N++):N&&(E.splice(O,1),N--);if(!b&&!C)for(;N--;N)E.unshift("..");!b||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),F&&"/"!==E.join("/").substr(-1)&&E.push("");var j,k=""===E[0]||E[0]&&"/"===E[0].charAt(0);x&&(n.hostname=n.host=k?"":E.length?E.shift():"",(j=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=j.shift(),n.host=n.hostname=j.shift()));return(b=b||n.host&&E.length)&&!k&&E.unshift(""),E.length?n.pathname=E.join("/"):(n.pathname=null,n.path=null),s.isNull(n.pathname)&&s.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){if("xin"in window)throw new Error("Xin already declared!");const i=window.xin=n(32);i.getInstance(),i.components=n(45),i.middlewares=n(46),n(43)},function(t,e,n){"use strict";n.r(e);var i=n(1);n.d(e,"event",function(){return i.f}),n.d(e,"Async",function(){return i.a}),n.d(e,"bootstrap",function(){return i.e}),n.d(e,"getInstance",function(){return i.g}),n.d(e,"Repository",function(){return i.d}),n.d(e,"Fx",function(){return i.c}),n.d(e,"Debounce",function(){return i.b});var s=n(0);n.d(e,"define",function(){return s.e}),n.d(e,"base",function(){return s.d}),n.d(e,"Component",function(){return s.a}),n.d(e,"T",function(){return s.c}),n.d(e,"Filter",function(){return s.b})},function(t,e){var n,i,s=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(t){n=r}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(t){i=o}}();var c,l=[],h=!1,u=-1;function p(){h&&c&&(h=!1,c.length?l=c.concat(l):u=-1,l.length&&d())}function d(){if(!h){var t=a(p);h=!0;for(var e=l.length;e;){for(c=l,l=[];++u<e;)c&&c[u].run();u=-1,e=l.length}c=null,h=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new f(t,e)),1!==l.length||h||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,e,n){t.exports=function(t){function e(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return i.colors[Math.abs(e)%i.colors.length]}function i(t){let n;function o(...t){if(!o.enabled)return;const e=o,s=Number(new Date),r=s-(n||s);e.diff=r,e.prev=n,e.curr=s,n=s,t[0]=i.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let a=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(n,s)=>{if("%%"===n)return n;a++;const r=i.formatters[s];if("function"==typeof r){const i=t[a];n=r.call(e,i),t.splice(a,1),a--}return n}),i.formatArgs.call(e,t),(e.log||i.log).apply(e,t)}return o.namespace=t,o.enabled=i.enabled(t),o.useColors=i.useColors(),o.color=e(t),o.destroy=s,o.extend=r,"function"==typeof i.init&&i.init(o),i.instances.push(o),o}function s(){const t=i.instances.indexOf(this);return-1!==t&&(i.instances.splice(t,1),!0)}function r(t,e){return i(this.namespace+(void 0===e?":":e)+t)}return i.debug=i,i.default=i,i.coerce=function(t){return t instanceof Error?t.stack||t.message:t},i.disable=function(){i.enable("")},i.enable=function(t){let e;i.save(t),i.names=[],i.skips=[];const n=("string"==typeof t?t:"").split(/[\s,]+/),s=n.length;for(e=0;e<s;e++)n[e]&&("-"===(t=n[e].replace(/\*/g,".*?"))[0]?i.skips.push(new RegExp("^"+t.substr(1)+"$")):i.names.push(new RegExp("^"+t+"$")));for(e=0;e<i.instances.length;e++){const t=i.instances[e];t.enabled=i.enabled(t.namespace)}},i.enabled=function(t){if("*"===t[t.length-1])return!0;let e,n;for(e=0,n=i.skips.length;e<n;e++)if(i.skips[e].test(t))return!1;for(e=0,n=i.names.length;e<n;e++)if(i.names[e].test(t))return!0;return!1},i.humanize=n(35),Object.keys(t).forEach(e=>{i[e]=t[e]}),i.instances=[],i.names=[],i.skips=[],i.formatters={},i.selectColor=e,i.enable(i.load()),i}},function(t,e){var n=1e3,i=60*n,s=60*i,r=24*s,o=7*r,a=365.25*r;function c(t,e,n,i){var s=e>=1.5*n;return Math.round(t/n)+" "+i+(s?"s":"")}t.exports=function(t,e){e=e||{};var l=typeof t;if("string"===l&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var c=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"weeks":case"week":case"w":return c*o;case"days":case"day":case"d":return c*r;case"hours":case"hour":case"hrs":case"hr":case"h":return c*s;case"minutes":case"minute":case"mins":case"min":case"m":return c*i;case"seconds":case"second":case"secs":case"sec":case"s":return c*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(t);if("number"===l&&!1===isNaN(t))return e.long?function(t){var e=Math.abs(t);if(e>=r)return c(t,e,r,"day");if(e>=s)return c(t,e,s,"hour");if(e>=i)return c(t,e,i,"minute");if(e>=n)return c(t,e,n,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=r)return Math.round(t/r)+"d";if(e>=s)return Math.round(t/s)+"h";if(e>=i)return Math.round(t/i)+"m";if(e>=n)return Math.round(t/n)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){var i={"./boolean":12,"./boolean.js":12,"./consoleError":13,"./consoleError.js":13,"./consoleInfo":14,"./consoleInfo.js":14,"./consoleLog":15,"./consoleLog.js":15,"./consoleTrace":16,"./consoleTrace.js":16,"./consoleWarn":17,"./consoleWarn.js":17,"./cssurl":18,"./cssurl.js":18,"./currency":19,"./currency.js":19,"./default":20,"./default.js":20,"./json":21,"./json.js":21,"./lower":22,"./lower.js":22,"./not":23,"./not.js":23,"./number":24,"./number.js":24,"./required":25,"./required.js":25,"./slice":26,"./slice.js":26,"./string":27,"./string.js":27,"./upper":28,"./upper.js":28};function s(t){var e=r(t);return n(e)}function r(t){var e=i[t];if(!(e+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return e}s.keys=function(){return Object.keys(i)},s.resolve=r,t.exports=s,s.id=36},function(t,e,n){(function(t,i){var s;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(r){"object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType;var o="object"==typeof i&&i;o.global!==o&&o.window!==o&&o.self;var a,c=2147483647,l=36,h=1,u=26,p=38,d=700,f=72,m=128,_="-",g=/^xn--/,y=/[^\x20-\x7E]/,w=/[\x2E\u3002\uFF0E\uFF61]/g,v={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=l-h,C=Math.floor,E=String.fromCharCode;function x(t){throw new RangeError(v[t])}function A(t,e){for(var n=t.length,i=[];n--;)i[n]=e(t[n]);return i}function F(t,e){var n=t.split("@"),i="";return n.length>1&&(i=n[0]+"@",t=n[1]),i+A((t=t.replace(w,".")).split("."),e).join(".")}function N(t){for(var e,n,i=[],s=0,r=t.length;s<r;)(e=t.charCodeAt(s++))>=55296&&e<=56319&&s<r?56320==(64512&(n=t.charCodeAt(s++)))?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),s--):i.push(e);return i}function O(t){return A(t,function(t){var e="";return t>65535&&(e+=E((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=E(t)}).join("")}function j(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:l}function k(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function T(t,e,n){var i=0;for(t=n?C(t/d):t>>1,t+=C(t/e);t>b*u>>1;i+=l)t=C(t/b);return C(i+(b+1)*t/(t+p))}function $(t){var e,n,i,s,r,o,a,p,d,g,y=[],w=t.length,v=0,b=m,E=f;for((n=t.lastIndexOf(_))<0&&(n=0),i=0;i<n;++i)t.charCodeAt(i)>=128&&x("not-basic"),y.push(t.charCodeAt(i));for(s=n>0?n+1:0;s<w;){for(r=v,o=1,a=l;s>=w&&x("invalid-input"),((p=j(t.charCodeAt(s++)))>=l||p>C((c-v)/o))&&x("overflow"),v+=p*o,!(p<(d=a<=E?h:a>=E+u?u:a-E));a+=l)o>C(c/(g=l-d))&&x("overflow"),o*=g;E=T(v-r,e=y.length+1,0==r),C(v/e)>c-b&&x("overflow"),b+=C(v/e),v%=e,y.splice(v++,0,b)}return O(y)}function S(t){var e,n,i,s,r,o,a,p,d,g,y,w,v,b,A,F=[];for(w=(t=N(t)).length,e=m,n=0,r=f,o=0;o<w;++o)(y=t[o])<128&&F.push(E(y));for(i=s=F.length,s&&F.push(_);i<w;){for(a=c,o=0;o<w;++o)(y=t[o])>=e&&y<a&&(a=y);for(a-e>C((c-n)/(v=i+1))&&x("overflow"),n+=(a-e)*v,e=a,o=0;o<w;++o)if((y=t[o])<e&&++n>c&&x("overflow"),y==e){for(p=n,d=l;!(p<(g=d<=r?h:d>=r+u?u:d-r));d+=l)A=p-g,b=l-g,F.push(E(k(g+A%b,0))),p=C(A/b);F.push(E(k(p,0))),r=T(n,v,i==s),n=0,++i}++n,++e}return F.join("")}a={version:"1.4.1",ucs2:{decode:N,encode:O},decode:$,encode:S,toASCII:function(t){return F(t,function(t){return y.test(t)?"xn--"+S(t):t})},toUnicode:function(t){return F(t,function(t){return g.test(t)?$(t.slice(4).toLowerCase()):t})}},void 0===(s=function(){return a}.call(e,n,e,t))||(t.exports=s)}()}).call(this,n(38)(t),n(39))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){"use strict";function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,r){e=e||"&",n=n||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(e);var c=1e3;r&&"number"==typeof r.maxKeys&&(c=r.maxKeys);var l=t.length;c>0&&l>c&&(l=c);for(var h=0;h<l;++h){var u,p,d,f,m=t[h].replace(a,"%20"),_=m.indexOf(n);_>=0?(u=m.substr(0,_),p=m.substr(_+1)):(u=m,p=""),d=decodeURIComponent(u),f=decodeURIComponent(p),i(o,d)?s(o[d])?o[d].push(f):o[d]=[o[d],f]:o[d]=f}return o};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,a){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?r(o(t),function(o){var a=encodeURIComponent(i(o))+n;return s(t[o])?r(t[o],function(t){return a+encodeURIComponent(i(t))}).join(e):a+encodeURIComponent(i(t[o]))}).join(e):a?encodeURIComponent(i(a))+n+encodeURIComponent(i(t)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function r(t,e){if(t.map)return t.map(e);for(var n=[],i=0;i<t.length;i++)n.push(e(t[i],i));return n}var o=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){},,function(t,e,n){"use strict";n.r(e);var i=n(1),s=n(0),r=n(8),o=n(30),a=n.n(o),c=n(11),l=n.n(c);const h=n(9)("xin:components:app");class u extends s.a{get props(){return{title:{type:String,observer:"_titleChanged"},manual:{type:Boolean},mode:{type:String,value:"hash"},rootUri:{type:String,value:"/"},hash:{type:String,value:"#!"},startDelay:{type:Number,value:100},location:{type:Object,value:()=>window.location},history:{type:Object,value:()=>window.history}}}get hashRegexp(){return this._hashRegexp&&this._hash===this.hash||(this._hashRegexp=new RegExp(`${this.hash}(.*)$`),this._hash=this.hash),this._hashRegexp}notFound(t){console.warn(`Route not found: ${t}`)}_titleChanged(t){t&&(document.title=t)}created(){this.__appSignature=!0,this.handlers=[],this.middlewares=[],this.__started=!1,this.__starting=!1,this.classList.add("xin-app")}attached(){this.manual||this.async(()=>{this.start()},1)}detached(){super.detached(),"history"===this.mode?(Object(i.f)(window).off("popstate",this.__navCallback),Object(i.f)(document).off("click",this.__clickCallback),delete this.__clickCallback):Object(i.f)(window).off("hashchange",this.__navCallback),delete this.__navCallback}route(t,e){this.handlers.push(new r.a(t,e))}async start(){if(this.__started||this.__starting)return;this.__middlewareChainRun=function(t){for(let e of t)if("function"!=typeof e)throw new TypeError("Middleware must be composed of functions!");return(e,n)=>{let i=-1;return function s(r){if(r<=i)throw new Error("next() called multiple times");i=r;let o=t[r];r===t.length&&(o=n);if(!o)return;return o(e,()=>s(r+1))}(0)}}(this.middlewares),this.__listenNavigation(),h.enabled&&h(`Starting ${this.is}:${this.__id} ...`),this.__starting=!0;let t=await this.__execute();this.async(()=>{this.__starting=!1,t&&(h.enabled&&h(`Started ${this.is}:${this.__id}`),this.__started=!0,this.fire("started"))},this.startDelay)}__listenNavigation(){this.__navCallback=(()=>{this.__execute()}),"history"===this.mode?(this.__clickCallback=(t=>{if(!t.defaultPrevented&&"A"===t.target.nodeName&&""===t.target.target){t.preventDefault();let e={url:t.target.getAttribute("href")};this.history.pushState(e,t.target.innerHTML,t.target.href),this.__navCallback()}}),Object(i.f)(window).on("popstate",this.__navCallback),Object(i.f)(document).on("click",this.__clickCallback)):Object(i.f)(window).on("hashchange",this.__navCallback)}get started(){return this.__started||!1}getFragmentExecutors(t){return this.handlers.reduce((e,n)=>{let i=n.getExecutorFor(t);return i&&e.push(i),e},[])}async __execute(){let t=this.__navParameters;delete this.__navParameters;let e=this.getFragment(),{pathname:n,query:i}=a.a.parse(e),s=l.a.parse(i),r={app:this,uri:e,pathname:n,queryParameters:s,navParameters:t};return!1!==await this.__middlewareChainRun(r,()=>{let n=this.getFragmentExecutors(r.pathname);if(0===n.length)return this.notFound(e),void this.fire("route-not-found",e);n.forEach(e=>{let n=Object.assign({},e.args,s,t);e.handler.callback(n,r)})})&&(this.fire("navigated",r),!0)}navigate(t="/",e={}){if(this.__navParameters=e.parameters,"history"===this.mode){let n=this.rootUri+t.toString().replace(/\/$/,"").replace(/^\//,"");this.location.href.replace(this.location.origin,"")!==n&&(this.history[e.replace?"replaceState":"pushState"](this.__navParameters,document.title,n),this.__execute())}else e.replace?this.location.replace(this.hash+t):this.location.hash=this.hash+t;return this}use(t){this.middlewares.push(t)}getFragment(){try{let t;if("history"===this.mode)t=(t=decodeURI(this.location.pathname+this.location.search)).replace(/\?(.*)$/,""),t="/"===this.rootUri?t:t.replace(this.rootUri,"");else{let e=this.location.href.match(this.hashRegexp);t=e?e[1]:""}return"/"+t.toString().replace(/\/$/,"").replace(/^\//,"")}catch(t){return console.error("Fragment is not match any pattern, fallback to /"),"/"}}}Object(s.e)("xin-app",u);var p=n(4);class d extends s.a{static create(t,e={}){const n=document.createElement("div");n.innerHTML=`<xin-fixture><template>${t}</template></xin-fixture>`;const i=n.firstElementChild;return i.__initialData=e,document.body.appendChild(i),new Promise(t=>t(i))}attached(){super.attached(),this.set(this.__initialData),this.connected=!0,this.async(()=>this.fire("connected"))}detached(){super.detached(),this.connected=!1,this.fire("disconnected")}dispose(){this.parentElement.removeChild(this)}async waitConnected(t){this.connected||await this.waitFor("connected"),await p.a.sleep(t)}}Object(s.e)("xin-fixture",d);var f=n(7);class m extends s.a{ready(){super.ready();for(let t=this.firstElementChild,e=0;t;t=t.nextElementSibling,e++)t.setAttribute("index",e)}setFocus(t){if(t){let e=t.getAttribute("index"),n=this.focused$?this.focused$.getAttribute("index"):-1;n<e?this.__transitionForward(this.focused$,t):n>e&&this.__transitionBackward(this.focused$,t)}else this.focused$&&this.focused$.setFocus(!1);this.focused$=t}__transitionBackward(t,e){Promise.all([e.inFx.play(-1),t.outFx.play(-1)]).then(()=>{t.setVisible(!1),e.setVisible(!0),t.setFocus(!1),e.setFocus(!0),this.$focused=e,e.inFx.stop(),t.outFx.stop()})}__transitionForward(t,e){if(t)Promise.all([e.inFx.play(1),t.outFx.play(1)]).then(()=>{t.setVisible(!1),e.setVisible(!0),t.setFocus(!1),e.setFocus(!0),this.$focused=e,e.inFx.stop(),t.outFx.stop()});else{let t=new i.c({element:e,transition:"none"});t.play("in",1).then(()=>{e.setVisible(!0),e.setFocus(!0),this.$focused=e,t.stop()})}}}Object(s.e)("xin-pager",m);var _=n(6);class g extends s.c{constructor(t,e,n,i){super(),this.__repeat=e,this.__repeatAs=e.as,this.__repeatIndexAs=e.indexAs,this.__templateInitialize(t,e.__templateModel,e.__templateMarker),this.is="$repeat-row",this.__id=this.__templateId,this.__templateChildNodes.forEach(t=>{t.nodeType===window.Node.ELEMENT_NODE&&(t.__repeatModel=this)}),this.update(n,i),this.__templateRender()}get __app(){return this.__templateHost.__app}update(t,e){this[this.__repeatAs]=t,this[this.__repeatIndexAs]=e,this.notify(this.__repeatAs,t),this.notify(this.__repeatIndexAs,e)}set(t,e){if(1!==arguments.length||"object"!=typeof t){if((t=this.__templateGetPathAsArray(t))[0]===this.__repeatAs||t[0]===this.__repeatIndexAs)return super.set(t,e)}else{let e=t;for(let t in e)e.hasOwnProperty(t)&&this.set(t,e[t])}}get(t){return(t=this.__templateGetPathAsArray(t))[0]===this.__repeatAs||t[0]===this.__repeatIndexAs?super.get(t):this.__templateHost.get(t)}__templateAnnotate(t,e){if(!super.__templateAnnotate(t,e))return!1;let n=this.__templateGetPathAsArray(t.name);if(n[0]===this.__repeatAs||n[0]===this.__repeatIndexAs)return!0;for(let t in this.__templateBindings)t===n[0]&&delete this.__templateBindings[t];if("m"===t.type){let n=new _.a(this,t,e);this.__templateHost.__templateGetBinding(t.fn.name).annotate(n)}let i=new _.a(this.__templateHost,t,e);return t.vpaths.forEach(t=>{this.__templateHost.__templateGetBinding(t.name).annotate(i)}),e.set(t.invoke(this.__templateHost)),!0}__templateUninitialize(){super.__templateUninitialize()}}const y=()=>!0;class w extends s.a{get props(){return Object.assign({},super.props,{items:{type:Array,observer:"_itemsChanged(items, filter)"},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},filter:{type:Function,observer:"_itemsChanged(items, filter)"},to:{type:String,value:""}})}created(){super.created(),this.rows=[]}__initTemplate(){if(this.__templateFor=this.firstElementChild,!this.__templateFor)throw new Error('Invalid xin-for definition, must be <xin-for items="[[items]]"><template>...</template></xin-for>');this.removeChild(this.__templateFor);let t=this,e=this.getAttribute("to");if(e){let n=this.parentElement.querySelector(e)||document.querySelector(e);if(!n)throw new Error(`xin-for render to unknown element ${e}`);t=document.createComment("marker-for"),n.appendChild(t)}s.c.prototype.__templateInitialize.call(this,null,this,t)}_itemsChanged(t,e){this.debounce("_itemsChanged",()=>{let e=0;if(t&&t.length){let n=this.filter||y;t.filter(n).forEach((t,n)=>{this.rows[n]?this.rows[n].update(t,n):this.rows.push(new g(this.__templateFor,this,t,n)),e++})}this.rows.splice(e).forEach(t=>{t.__templateUninitialize()})})}itemForElement(t){return this.modelForElement(t).get(this.as)}indexForElement(t){return this.modelForElement(t).get(this.indexAs)}modelForElement(t){for(;t&&!t.__repeatModel;)t=t.parentElement;return t.__repeatModel}}Object(s.e)("xin-for",w);var v=n(29);n.d(e,"App",function(){return u}),n.d(e,"Fixture",function(){return d}),n.d(e,"Middleware",function(){return f.a}),n.d(e,"Pager",function(){return m}),n.d(e,"For",function(){return w}),n.d(e,"View",function(){return v.View})},function(t,e,n){"use strict";n.r(e);var i=n(0),s=n(7),r=n(1),o=n(8),a=n(4);class c{constructor(t,e,n){this.name=e.nodeName.toLowerCase(),this.uri=e.getAttribute("uri"),this.element=e,this.loader=n,this.route=new o.a(this.uri),this.isStaticRoute=o.a.isStatic(this.uri),this.bag=t}get loaded(){if(this._loaded)return!0;return!!this.element.classList.contains("xin-view")&&(this._loaded=!0,!0)}async load(){if(!this.loaded){if(!this.loader)throw new Error(`Cannot lazy load view: ${this.name}`);this.loader.load(this),await Object(r.f)(this.element).waitFor("routed"),this._loaded=!0,this.element.querySelector(".xin-view")&&await a.a.sleep(300)}}}class l extends s.a{get props(){return Object.assign({},super.props,{loaders:{type:Array,value:()=>this.__repository.get("view.loaders")?this.__repository.get("view.loaders"):[]}})}created(){super.created(),this.views=[]}attached(){super.attached(),this.loaders.push({test:/^xin-/,load(t){if("xin-view"===t.name)return Promise.resolve().then(n.bind(null,29))}})}get(t){let e=this.views.find(e=>e.uri===t);return e||this.views.find(e=>!(!e.isStaticRoute||e.uri!==t)||e.route.getExecutorFor(t))}put(t){this.views.push(t)}ensure(t,e){0===this.views.length&&t.querySelectorAll("[lazy-view]").forEach(t=>{let e=this.loaders.find(e=>t.nodeName.toLowerCase().match(e.test)),n=new c(this,t,e);this.put(n)});let n=this.get(e);if(n)return n.load()}callback(t){const e=this;return async function(t,n){await e.ensure(t.app,t.pathname),await n()}}}Object(i.e)("xin-lazy-view-middleware",l);class h extends s.a{get props(){return Object.assign({},super.props,{defaultTitle:{type:String,value:"Xin"},formatter:{type:Function,value:()=>this._defaultFormatter}})}callback(t){const e=this;return async function(t,n){t.app.once("focus",async t=>{document.title=await e.formatter(t.target)||e.defaultTitle}),await n()}}_defaultFormatter(t){return t.title}}Object(i.e)("xin-title-middleware",h),n.d(e,"LazyView",function(){return l}),n.d(e,"Title",function(){return h})}]);