!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.xin=e():t.xin=e()}(window,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=22)}([function(t,e,n){(function(i){e.log=function(...t){return"object"==typeof console&&console.log&&console.log(...t)},e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let i=0,s=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(i++,"%c"===t&&(s=i))}),e.splice(s,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&void 0!==i&&"env"in i&&(t=i.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=n(19)(e);const{formatters:s}=t.exports;s.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this,n(18))},function(t,e,n){"use strict";n.r(e),e.default=function(t){return`${Boolean(t)}`}},function(t,e,n){"use strict";n.r(e),e.default=t=>(console.error("consoleError filtered:",t),t)},function(t,e,n){"use strict";n.r(e),e.default=t=>(console.info("consoleInfo filtered:",t),t)},function(t,e,n){"use strict";n.r(e),e.default=t=>(console.log("consoleLog filtered:",t),t)},function(t,e,n){"use strict";n.r(e),e.default=t=>(console.trace("consoleTrace filtered:",t),t)},function(t,e,n){"use strict";n.r(e),e.default=t=>(console.warn("consoleWarn filtered:",t),t)},function(t,e,n){"use strict";n.r(e),e.default=function(t){return`url(${t})`}},function(t,e,n){"use strict";n.r(e),e.default=function(t){return(t||0).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e){return t||e}},function(t,e,n){"use strict";n.r(e),e.default=(t,e)=>JSON.stringify(t,null,Number(e))},function(t,e,n){"use strict";n.r(e),e.default=function(t){return String(t||"").toLowerCase()}},function(t,e,n){"use strict";n.r(e),e.default=function(t){return Boolean(!t)}},function(t,e,n){"use strict";n.r(e),e.default=function(t){return Number(t||0).toLocaleString()}},function(t,e,n){"use strict";n.r(e),e.default=function(t){if(null==t||""===t)throw new Error("Value is required");return t}},function(t,e,n){"use strict";n.r(e),e.default=function(t,e,n){return Array.prototype.slice.call(t||[],e,n)}},function(t,e,n){"use strict";n.r(e),e.default=function(t){return null==t?"":String(t)}},function(t,e,n){"use strict";n.r(e),e.default=function(t){return String(t||"").toUpperCase()}},function(t,e){var n,i,s=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:r}catch(t){i=r}}();var l,c=[],h=!1,u=-1;function m(){h&&l&&(h=!1,l.length?c=l.concat(c):u=-1,c.length&&d())}function d(){if(!h){var t=a(m);h=!0;for(var e=c.length;e;){for(l=c,c=[];++u<e;)l&&l[u].run();u=-1,e=c.length}l=null,h=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===r||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function _(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||h||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=_,s.addListener=_,s.once=_,s.off=_,s.removeListener=_,s.removeAllListeners=_,s.emit=_,s.prependListener=_,s.prependOnceListener=_,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,e,n){t.exports=function(t){function e(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return i.colors[Math.abs(e)%i.colors.length]}function i(t){let n;function r(...t){if(!r.enabled)return;const e=r,s=Number(new Date),o=s-(n||s);e.diff=o,e.prev=n,e.curr=s,n=s,t[0]=i.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let a=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(n,s)=>{if("%%"===n)return n;a++;const o=i.formatters[s];if("function"==typeof o){const i=t[a];n=o.call(e,i),t.splice(a,1),a--}return n}),i.formatArgs.call(e,t),(e.log||i.log).apply(e,t)}return r.namespace=t,r.enabled=i.enabled(t),r.useColors=i.useColors(),r.color=e(t),r.destroy=s,r.extend=o,"function"==typeof i.init&&i.init(r),i.instances.push(r),r}function s(){const t=i.instances.indexOf(this);return-1!==t&&(i.instances.splice(t,1),!0)}function o(t,e){const n=i(this.namespace+(void 0===e?":":e)+t);return n.log=this.log,n}function r(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return i.debug=i,i.default=i,i.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},i.disable=function(){const t=[...i.names.map(r),...i.skips.map(r).map(t=>"-"+t)].join(",");return i.enable(""),t},i.enable=function(t){let e;i.save(t),i.names=[],i.skips=[];const n=("string"==typeof t?t:"").split(/[\s,]+/),s=n.length;for(e=0;e<s;e++)n[e]&&("-"===(t=n[e].replace(/\*/g,".*?"))[0]?i.skips.push(new RegExp("^"+t.substr(1)+"$")):i.names.push(new RegExp("^"+t+"$")));for(e=0;e<i.instances.length;e++){const t=i.instances[e];t.enabled=i.enabled(t.namespace)}},i.enabled=function(t){if("*"===t[t.length-1])return!0;let e,n;for(e=0,n=i.skips.length;e<n;e++)if(i.skips[e].test(t))return!1;for(e=0,n=i.names.length;e<n;e++)if(i.names[e].test(t))return!0;return!1},i.humanize=n(20),Object.keys(t).forEach(e=>{i[e]=t[e]}),i.instances=[],i.names=[],i.skips=[],i.formatters={},i.selectColor=e,i.enable(i.load()),i}},function(t,e){var n=1e3,i=60*n,s=60*i,o=24*s,r=7*o,a=365.25*o;function l(t,e,n,i){var s=e>=1.5*n;return Math.round(t/n)+" "+i+(s?"s":"")}t.exports=function(t,e){e=e||{};var c=typeof t;if("string"===c&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var l=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*a;case"weeks":case"week":case"w":return l*r;case"days":case"day":case"d":return l*o;case"hours":case"hour":case"hrs":case"hr":case"h":return l*s;case"minutes":case"minute":case"mins":case"min":case"m":return l*i;case"seconds":case"second":case"secs":case"sec":case"s":return l*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}(t);if("number"===c&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=o)return l(t,e,o,"day");if(e>=s)return l(t,e,s,"hour");if(e>=i)return l(t,e,i,"minute");if(e>=n)return l(t,e,n,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=o)return Math.round(t/o)+"d";if(e>=s)return Math.round(t/s)+"h";if(e>=i)return Math.round(t/i)+"m";if(e>=n)return Math.round(t/n)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){var i={"./boolean":1,"./boolean.js":1,"./consoleError":2,"./consoleError.js":2,"./consoleInfo":3,"./consoleInfo.js":3,"./consoleLog":4,"./consoleLog.js":4,"./consoleTrace":5,"./consoleTrace.js":5,"./consoleWarn":6,"./consoleWarn.js":6,"./cssurl":7,"./cssurl.js":7,"./currency":8,"./currency.js":8,"./default":9,"./default.js":9,"./json":10,"./json.js":10,"./lower":11,"./lower.js":11,"./not":12,"./not.js":12,"./number":13,"./number.js":13,"./required":14,"./required.js":14,"./slice":15,"./slice.js":15,"./string":16,"./string.js":16,"./upper":17,"./upper.js":17};function s(t){var e=o(t);return n(e)}function o(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}s.keys=function(){return Object.keys(i)},s.resolve=o,t.exports=s,s.id=21},function(t,e,n){"use strict";n.r(e);var i={};n.r(i),n.d(i,"Fixture",function(){return mt}),n.d(i,"For",function(){return _t}),n.d(i,"Transition",function(){return wt}),n.d(i,"If",function(){return yt});const s=n(0)("xin::core");class o{static bootstrap(t){return window.xin$repository?window.xin$repository.update(t):window.xin$repository=new o(t),window.xin$repository}static singleton(){if(window.xin$repository||o.bootstrap(),"function"!=typeof window.xin$repository.update)throw new Error("Invalid global xin repository found!");return window.xin$repository}constructor(t={}){s.enabled&&s("Repository construct..."),this.data=Object.assign({"customElements.version":"v1"},t)}update(t={}){s.enabled&&s("Repository update data..."),this.data=Object.assign(this.data,t)}get(t){return this.data[t]}put(t,e){if(void 0===e)return this.remove(t);this.data[t]=e}remove(t){delete this.data[t]}}function r(t){return o.bootstrap(t)}function a(){let t=0;return function(){return t++}}const l=a();let c,h=0,u=0;const m={},d={};function p(t,e,n){return"_root"===e?n:t!==n?function(t){return c||(c=t.matches?t.matches:t.webkitMatchesSelector?t.webkitMatchesSelector:t.mozMatchesSelector?t.mozMatchesSelector:t.msMatchesSelector?t.msMatchesSelector:t.oMatchesSelector?t.oMatchesSelector:C.matchesSelector)}(t).call(t,e)?t:t.parentNode?(h++,p(t.parentNode,e,n)):void 0:void 0}function _(t,e,n,i){m[t.id]||(m[t.id]={}),m[t.id][e]||(m[t.id][e]={}),m[t.id][e][n]||(m[t.id][e][n]=[]),m[t.id][e][n].push(i)}function f(t,e,n,i){if(m[t.id])if(e)if(i||n)if(i){if(m[t.id][e][n])for(let s=0;s<m[t.id][e][n].length;s++)if(m[t.id][e][n][s]===i){m[t.id][e][n].splice(s,1);break}}else delete m[t.id][e][n];else m[t.id][e]={};else for(const e in m[t.id])Object.prototype.hasOwnProperty.call(m[t.id],e)&&(m[t.id][e]={})}const y={},E=t=>[t],g={transitionend(t){const e=document.createElement("fakeelement"),n={OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",transition:"transitionend"};for(const t in n)if(void 0!==e.style[t])return[n[t]]}};function w(t){let e;if(t in y)e=y[t];else{e=(g[t]||E)(t),y[t]=e}return e}function v(t,e,n,i){if(!this.element)throw new Error("Cannot bind event to undefined element");if(e=e||"_root",t instanceof Array||(t=[t]),n||"function"!=typeof e||(n=e,e="_root"),e instanceof Element){let t;e.hasAttribute("bind-event-id")?t=e.getAttribute("bind-event-id"):(t=l(),e.setAttribute("bind-event-id",t)),e=`[bind-event-id="${t}"]`}const s=this.id;let o;function r(t){return function(e){!function(t,e,n){if(!m[t][n])return;const i=e.target||e.srcElement;let s,o;const r={};let a=0,l=0;for(s in h=0,m[t][n])Object.prototype.hasOwnProperty.call(m[t][n],s)&&(o=p(i,s,d[t].element))&&C.matchesEvent(n,d[t].element,o,"_root"===s,e)&&(h++,m[t][n][s].match=o,r[h]=m[t][n][s]);for(e.stopPropagation=function(){e.cancelBubble=!0},a=0;a<=h;a++)if(r[a])for(l=0;l<r[a].length;l++){if(!1===r[a][l].call(r[a].match,e))return void C.cancel(e);if(e.cancelBubble)return}}(s,e,t)}}for(o=0;o<t.length;o++)w(t[o]).forEach(t=>{i?f(this,t,e,n):(m[s]&&m[s][t]||C.addEvent(this,t,r(t)),_(this,t,e,n))});return this}function C(t,e){this.element=t,this.id=e}function b(t){if(!t)throw new Error("Cannot create event delegator for unknown element");for(const e in d)if(d[e].element===t)return d[e];return d[++u]=new C(t,u),d[u]}C.prototype.on=function(t,e,n){return v.call(this,t,e,n)},C.prototype.off=function(t,e,n){return v.call(this,t,e,n,!0)},C.prototype.once=function(t,e,n){e=e||"_root",n||"function"!=typeof e||(n=e,e="_root");const i=(...s)=>(this.off(t,e,i),n(...s));return this.on(t,e,i)},C.prototype.waitFor=function(t,e=3e3){return new Promise((n,i)=>{const s=t=>{clearTimeout(o),n(t)};let o;e>0&&(o=setTimeout(()=>{this.off(t,s),i(new Error("Event#waitFor got timeout"))},e)),this.once(t,s)})},C.prototype.fire=function(t,e,n){let i;e=e||{};const s=void 0===(n=n||{}).bubbles||n.bubbles,o=Boolean(n.cancelable);switch(t){case"click":i=new Event(t,{bubbles:s,cancelable:o,detail:e});break;default:i=new CustomEvent(t,{bubbles:Boolean(s),cancelable:o,detail:e})}return this.element.dispatchEvent(i),i},C.matchesSelector=function(){},C.cancel=function(t){t.preventDefault(),t.stopPropagation()},C.addEvent=function(t,e,n){if("touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e)return void t.element.addEventListener(e,n,{passive:!0});const i="blur"===e||"focus"===e;t.element.addEventListener(e,n,i)},C.aliases=w,C.matchesEvent=function(){return!0};const A=a(),T=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,x=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.msCancelAnimationFrame;class F{static nextFrame(t){return T(t)}static sleep(t){return new Promise(e=>{setTimeout(()=>this.nextFrame(e),t)})}static run(t,e){return(new F).start(t,e)}constructor(t){this.id=A(),this.context=t,this.cleared=!0}start(t,e){if("function"!=typeof t)throw new Error("Async should specify function");if(!this.cleared)throw new Error("Async already run");this.cleared=!1;const n=this,i=this.context,s=function(){n.frameHandle=T(()=>{n.__clear(),t.call(i)})};e?this.handle=setTimeout(s,e):s()}__clear(){this.cleared=!0,x(~~this.frameHandle),clearTimeout(~~this.handle),this.handle=this.frameHandle=void 0}cancel(){this.__clear()}}class M{constructor(t,e){this.context=t,this.immediate=Boolean(e),this.async=null,this.running=!1}start(t,e){if(this.immediate)throw new Error("Unimplemented yet!");this.running=!0,this.async=new F(this.context),this.async.start(()=>{t.call(this.context),this.running=!1,this.async=null},e)}cancel(){this.running=!1,this.async.cancel(),this.async=null}}class N{static add(t,e){k[t]=e}static get(t){return k[t]||k.none}constructor(t){t=t||{},this.element=t.element,this.duration=t.duration||0,this.transition=t.transition||"none",this.method=t.method||"",this.adapter=t.adapter||N.get(this.transition),this.running=!1,this.direction=0}async play(t){this.running=!0,this.direction=t,await this.adapter.play(this)}async stop(){await this.adapter.stop(this),this.running=!1,this.direction=0}}const k={none:{async play(){},async stop(){}},slide:{play:t=>new Promise(e=>{b(t.element).once("transitionend",()=>{t.element.classList.remove("trans-slide__animate"),e()}),t.element.classList.add(`trans-slide__${t.method}-${t.direction>0?"left":"right"}`),F.nextFrame(()=>{t.element.classList.add("trans-slide__animate"),F.nextFrame(()=>t.element.classList.add(`trans-slide__${t.method}`))})}),stop:t=>new Promise(e=>{F.nextFrame(()=>{t.element.classList.remove(`trans-slide__${t.method}-${t.direction>0?"left":"right"}`),t.element.classList.remove(`trans-slide__${t.method}`),e()})})},fade:{play:t=>new Promise(e=>{b(t.element).once("transitionend",()=>{e()}),t.element.classList.add(`trans-fade__${t.method}`),F.nextFrame(()=>{t.element.classList.add(`trans-fade__${t.method}-animate`)})}),stop:t=>new Promise(e=>{t.element.classList.remove(`trans-fade__${t.method}`),F.nextFrame(()=>{t.element.classList.remove(`trans-fade__${t.method}-animate`),e()})})}},L=n(0)("xin::core:define");function O(t,e,n){const i=o.singleton();let s=i.get(t);if(s)return L.enabled&&L(`Duplicate registering "${t}"`),s;if("v1"===i.get("customElements.version"))s=e,window.customElements.define(t,e,n);else{const i={prototype:Object.create(e.prototype,{is:{value:t}})};n&&n.extends&&(i.extends=n.extends),s=document.registerElement(t,i)}return i.put(t,s),s}const I={};function P(t){const e=I[t];return e||(I[t]=t.replace(/([a-z][A-Z])/g,function(t){return t[0]+"-"+t[1].toLowerCase()}),I[t])}const R={};function $(t,e){switch(e){case Number:t=Number(t);break;case Boolean:t=Boolean(""===t||"true"===t||"1"===t||"on"===t);break;case Object:try{t=JSON.parse(t)}catch(e){console.warn(`Failed decode json: "${t}" to Object`)}break;case Array:try{t=JSON.parse(t)}catch(e){console.warn(`Failed decode json: "${t}" to Array`),t=null}break;case Date:t=new Date(t);break;case RegExp:t=new RegExp(t);break;case Function:t=new Function(t)}return t}function S(t,...e){return"function"==typeof t?t(...e):t}const j={};class D{static get CACHE(){return j}static get(t){if(t in j)return j[t];const e=new D(t);return j[t]=e,e}constructor(t){if(this.name=t,this.contextName="",this.baseName="",this._value=null,this.type="v",!this.name.match(/^[a-zA-Z_]/))try{return this._value=JSON.parse(this.name),void(this.type="s")}catch(t){}if("v"===this.type){const t=this.name.split(".");this.baseName=t.pop(),this.contextName=t.join(".")}}value(...t){if("s"===this.type)return this._value;for(const e of t){if(!e)continue;const t="function"==typeof e.get?e.get(this.name):e[this.name];if(void 0!==t)return t}}invoke(t,...e){if(0===e.length)throw new Error(`Cannot invoke method ${this.name} of undefined context`);if("s"===this.type){const[t]=e;throw new Error(`Method is not eligible, ${t.__templateHost.nodeName||"$anonymous"}#${this.name}`)}for(const n of e)if(n)if("function"==typeof n.get){const e=this.contextName?n.get(this.contextName):n;if("function"==typeof e[this.baseName])return e[this.baseName](...t)}else if("function"==typeof n[this.name])return n[this.name].apply(n,t);const[n]=e;throw new Error(`Method is not eligible, ${n.__templateHost.nodeName||"$anonymous"}#${this.name}`)}}const H={};class B{constructor(t,e,n){this.name=t,this.callback=e,this.otherArgs=n}invoke(t){const e=[t];return[].push.apply(e,this.otherArgs),this.callback.apply(null,e)}static put(t,e){H[t]=e}static get(t){const e=t.split(":"),i=e.splice(1).join(":").split(","),s=e.pop();let o=H[s];if("function"!=typeof o)try{o=n(21)(`./${s}`).default}catch(t){}if(!o)throw new Error(`Filter "${t}" not found.`);return new B(s,o,i)}}const U={s:{"[":{},"{":{}},v:{"[":{},"{":{}}};function G(t,e,n){const i=U[n][e];if(t in i)return i[t];const s=new z(t,e,n);return n!==z.STATIC&&(i[t]=s),s}class z{static get CACHE(){return U}static get(t,e){if(t=(t||"").trim(),e)return G(t,z.READONLY,"v");const n=t[0];return n!==z.READONLY&&n!==z.READWRITE||t[1]!==n?G(t,z.READONLY,z.STATIC):G(t=t.slice(2,-2).trim(),n,"v")}static getFn(t,e,n){return z.get(-1===t.indexOf("(")?`${t}(${e.join(", ")})`:t,n)}static rawTokenize(t){let e=0;const n=[];for(;t&&e++<10;){const e=t.match(/^\s*("[^"]*"|[^,]+),?/);t=t.substr(e[0].length),n.push(e[1].trim())}return n}static tokenize(t){return z.rawTokenize(t).map(t=>D.get(t))}constructor(t,e,n){if(this.mode=e,this.type=n,this.name="",this.args=[],this.filters=[],this.value=t,n===z.STATIC)return;const i=t.split("|"),s=i[0].trim();if(this.filters=i.slice(1).map(t=>B.get(t.trim())),-1===s.indexOf("("))this.type=z.PROPERTY,this.name=s,this.args.push(D.get(s));else{this.mode=z.READONLY,this.type=z.METHOD;const t=s.match(/([^(]+)\(([^)]*)\)/);this.name=t[1].trim(),this.fn=D.get(this.name),this.args=z.tokenize(t[2])}}get constant(){return this.type!==z.METHOD&&this.vpaths.length!==this.args.length}get vpaths(){if(!this._vpaths){const t=[];this.args.forEach(e=>{"v"===e.type&&-1===t.indexOf(e.name)&&t.push(e)}),this._vpaths=t}return this._vpaths}invoke(t,e){if(this.type===z.PROPERTY){const n=this.args[0].value(t,e);return this.filters.reduce((t,e)=>e.invoke(t),n)}const n=this.args.map(n=>n.value(t,e));return this.fn.invoke(n,t,t.__templateHost)}}z.STATIC="s",z.METHOD="m",z.PROPERTY="p",z.READONLY="[",z.READWRITE="{";class q{constructor(t){this.name=t,this.children={},this.annotations=[]}getChild(t){return this.children[t]||(this.children[t]=new q(t)),this.children[t]}annotate(t){this.annotations.push(t)}deannotate(t){const e=this.annotations.indexOf(t);-1!==e&&this.annotations.splice(e,1)}dispatchEffect({model:t}){this.annotations.forEach(e=>{e.effect({model:t})}),Object.keys(this.children).forEach(e=>{this.children[e].dispatchEffect({model:t})})}dispose(){Object.keys(this.children).forEach(t=>{this.children[t].dispose()}),this.children={},this.annotations.forEach(t=>{this.deannotate(t)})}}class W{constructor(t,e){this.node=t,this.name=e}set(t){"function"==typeof this.node.set?this.node.set(this.name,t):this.node[this.name]=t}get(){return"function"==typeof this.node.get?this.node.get(this.name):this.node[this.name]}}const{TEXT_NODE:Y,ELEMENT_NODE:V}=Node;const{TEXT_NODE:X,ELEMENT_NODE:J}=Node;const{ELEMENT_NODE:Z}=Node;const K=[class{static test(t){return"function"==typeof t}constructor(t){this.callback=t}set(t){(0,this.callback)(t)}get(){throw new Error("CallbackAccessor is write-only")}},class extends W{static test(t,e){return"value"===e&&t.nodeType===J&&"INPUT"===t.nodeName||(!(t.nodeType!==X||!t.parentElement||"TEXTAREA"!==t.parentElement.nodeName)||void 0)}constructor(t){super(t,"value"),t.nodeType===X&&t.parentElement&&"TEXTAREA"===t.parentElement.nodeName&&(this.node=t.parentElement)}set(t){document.activeElement!==this.node&&super.set(t)}},class extends W{static test(t,e){return t.nodeType===Y||"text"===e&&t.nodeType===V}constructor(t){super(t,"textContent")}set(t){null==t&&(t=""),this.node.textContent=t}get(){throw new Error("TextAccessor is write-only")}},class extends W{static test(t,e){return"html"===e&&t.nodeType===Node.ELEMENT_NODE}set(t){null==t&&(t=""),this.node.innerHTML=t}get(){throw new Error("HTMLAccessor is write-only")}},class extends W{static test(t,e){return e&&e.startsWith("class.")}constructor(t,e){super(t,e.split(".").splice(1).join("."))}set(t){t?this.node.classList.add(this.name):this.node.classList.remove(this.name)}get(){throw new Error("ClassAccessor is write-only")}},class extends W{static test(t,e){return e&&e.startsWith("style.")}constructor(t,e){super(t,e.split(".").splice(1).join("."))}set(t){this.node.style[this.name]=t||""}get(){throw new Error("StyleAccessor is write-only")}},class extends W{static test(t,e){return t.nodeType===Node.ELEMENT_NODE&&e.endsWith("$")}constructor(t,e){super(t,e.slice(0,-1))}set(t){null==t||""===t?this.node.removeAttribute(this.name):this.node.setAttribute(this.name,t)}get(){return this.node.getAttribute(this.name)}},class extends W{static test(t,e){return t.nodeType===Z}constructor(t,e){super(t,function(t){const e=R[t];return e||(t.indexOf("-")<0?R[t]=t:R[t]=t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()}),R[t])}(e))}}];function Q(t,e){const n=K.find(n=>n.test(t,e));if(n)return new n(t,e);throw new Error(`Unimplemented resolving accessor for nodeType: ${t.nodeType} name: ${e}`)}class tt{constructor(t,e){this.expr=t,this.accessor=e}effect({model:t}){const e=this.expr.invoke(t);this.accessor&&this.accessor.set(e)}}(function(){if(document.__importNode)return!1;const t=document.createElement("template");t.innerHTML="<template>i</template>";const e=document.importNode(t.content,!0);return!e.firstChild.content.firstChild||"i"!==e.firstChild.content.firstChild.textContent})()&&(document.__importNode=document.importNode,document.importNode=function(t,e){if(!e)return document.__importNode(t,e);const n=[].slice.call(t.querySelectorAll("template")),i=document.__importNode(t,e);return i.querySelectorAll("template").forEach((t,e)=>{t.innerHTML=n[e].innerHTML}),i});const et=(()=>"undefined"!=typeof window&&("HTMLUnknownElement"in window&&!(document.createElement("slot")instanceof HTMLUnknownElement)))();const nt=a();class it{constructor(t,e={}){t&&(this.__templateInitialize(t),this.all(e))}get $(){return this.__templateHost.getElementsByTagName("*")}$$(t){return this.__templateHost.querySelector(t)}dispose(){this.__templateUninitialize()}on(){b(this.__templateHost).on(...arguments)}off(){b(this.__templateHost).off(...arguments)}once(){b(this.__templateHost).once(...arguments)}waitFor(){return b(this.__templateHost).waitFor(...arguments)}fire(t,e,n){return b(this.__templateHost).fire(t,e,n)}all(t){for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&this.set(e,t[e])}get(t){let e=this;return this.__templateGetPathAsArray(t).some(t=>null==e?(e=void 0,!0):(e=e[t],!1)),e}set(t,e){if(1===arguments.length&&"object"==typeof t){const e=t;for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&this.set(t,e[t]);return}if(t=this.__templateGetPathAsArray(t),e===this.get(t))return;let n=this;t.slice(0,-1).forEach(t=>{n&&(void 0!==n[t]&&null!==n[t]||(n[t]={}),n=n[t])});const i=t.slice(-1).pop();n[i]=e,this.notify(t,e)}push(t,...e){t=this.__templateGetPathAsArray(t);let n=this;t.slice(0,-1).forEach(t=>{n&&(void 0!==n[t]&&null!==n[t]||(n[t]={}),n=n[t])});const i=t.slice(-1).pop();Array.isArray(n[i])||(n[i]=[]),n[i]=n[i].slice();const s=n[i].push(...e);return this.notify(t,n[i]),s}pop(t){t=this.__templateGetPathAsArray(t);let e=this;t.slice(0,-1).forEach(t=>{e&&(void 0!==e[t]&&null!==e[t]||(e[t]={}),e=e[t])});const n=t.slice(-1).pop();Array.isArray(e[n])||(e[n]=[]),e[n]=e[n].slice();const i=e[n].pop();return this.notify(t,e[n]),i}splice(t,e,n,...i){t=this.__templateGetPathAsArray(t);let s=this;t.slice(0,-1).forEach(t=>{s&&(void 0!==s[t]&&null!==s[t]||(s[t]={}),s=s[t])});const o=t.slice(-1).pop();Array.isArray(s[o])||(s[o]=[]),s[o]=s[o].slice();const r=s[o].splice(e,n,...i);return this.notify(t,s[o]),r}notify(t,e){if(t=this.__templateGetPathAsString(t),!this.__templateMounted)return this.__templateNotifyOnMounted=this.__templateNotifyOnMounted||[],void(-1===this.__templateNotifyOnMounted.indexOf(t)&&this.__templateNotifyOnMounted.push(t));const n=this.__templateGetBinding(t);n&&(void 0===e&&(e=this.get(t)),n.dispatchEffect({model:this,value:e}))}__templateInitialize(t){if(this.__templateId=nt(),this.__templateBinding=new q,this.__templateEventListeners=[],this.__templateMounted=!1,this.__templateNotifyOnMounted=[],t){if("string"==typeof t){const e=t;(t=document.createElement("template")).innerHTML=e}this.__template=function(t){return!t.content&&HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(t),t}(t),this.__templateChildNodes=[],this.__templateParseAnnotations()}}__templateUninitialize(){this.__templateRemoveEventListener(),this.__templateMounted&&this.unmount(),this.__templateBinding.dispose(),this.__templateChildNodes=void 0,this.__template=void 0}mount(t,e){this.__templateMounted?console.warn("Template already mounted"):(this.__templateHost=t,this.__templateStartEventListeners(),this.__template&&(e||(this.__template.parentElement===this.__templateHost?e=this.__template:(e=document.createComment(`marker-${this.__templateId}`),this.__templateHost.appendChild(e))),this.__templateMarker=e,this.__templateRender()),this.__templateMounted=!0,this.__templateNotifyOnMounted.forEach(t=>this.notify(t,this.get(t))),this.__templateNotifyOnMounted=[])}unmount(){this.__templateMounted?(this.__templateMounted=!1,this.__templateNotifyOnMounted=[],this.__templateStopEventListeners(),this.__templateMarker&&this.__templateMarker.parentElement===this.__templateHost&&this.__templateMarker.nodeType===Node.COMMENT_NODE&&this.__templateMarker.data===`marker-${this.__templateId}`&&this.__templateHost.removeChild(this.__templateMarker),this.__templateHost=void 0,this.__templateMarker=void 0,this.__template&&this.__templateUnrender()):console.warn("Template already unmounted")}__templateStartEventListeners(){this.__templateEventListeners.forEach(({name:t,selector:e,listener:n})=>this.on(t,e,n))}__templateStopEventListeners(){this.__templateEventListeners.forEach(({name:t,selector:e,listener:n})=>this.off(t,e,n))}__templateRender(){const t=document.createDocumentFragment();[...this.__templateHost.childNodes].forEach(e=>{e!==this.__templateMarker&&t.appendChild(e)});const e=document.createDocumentFragment();this.__templateChildNodes.forEach(t=>e.appendChild(t)),e.querySelectorAll("slot").forEach(n=>{const i=function(t){return et?t.name:t.getAttribute("name")}(n),s=n.parentElement||e,o=document.createComment(`slot ${i}`);s.insertBefore(o,n),s.removeChild(n),i?t.querySelectorAll(`[slot="${i}"]`).forEach(t=>{s.insertBefore(t,o)}):s.insertBefore(t,o)}),this.__templateMarker.parentElement.insertBefore(e,this.__templateMarker)}__templateUnrender(){this.__templateChildNodes.forEach(t=>{t.parentElement&&t.parentElement.removeChild(t)})}__templateGetPathAsArray(t){return"string"!=typeof t?t:t.split(".")}__templateGetPathAsString(t){return"string"==typeof t?t:t.join(".")}__templateParseAnnotations(){const t=document.importNode(this.__template.content,!0);this.__templateChildNodes=[...t.childNodes];const e=this.__templateChildNodes.length;for(let t=0;t<e;t++){const e=this.__templateChildNodes[t];this.__templateParseNodeAnnotations(e)}}__templateParseEventAnnotations(t,e){const n=t.getAttribute(e);let i=e.slice(1,-1);"tap"===i&&(i="click");const s=z.getFn(n,[],!0),o=t;this.__templateAddEventListener({name:i,selector:o,listener:t=>s.invoke(this,{evt:t})})}__templateParseAttributeAnnotations(t){let e=!1;const n=t.attributes.length;for(let i=0;i<n;i++){const n=t.attributes[i],s=n.name;if("id"!==s&&"class"!==s&&"style"!==s)if(0===s.indexOf("("))this.__templateParseEventAnnotations(t,s);else{const i=z.get(n.value);if(i.type===z.STATIC)continue;e=this.__templateAnnotate(i,Q(t,s))||e}}return e}__templateParseElementAnnotations(t){let e=!1;if(t.__templateModel)return e;if(t.__templateModel=this,t.attributes&&t.attributes.length&&(e=this.__templateParseAttributeAnnotations(t)||e),t.childNodes&&t.childNodes.length){const n=[].slice.call(t.childNodes),i=n.length;for(let t=0;t<i;t++)e=this.__templateParseNodeAnnotations(n[t])||e}return t.querySelectorAll("slot").forEach(t=>{t.childNodes.forEach(t=>{e=this.__templateParseNodeAnnotations(t)||e})}),e}__templateParseNodeAnnotations(t){switch(t.nodeType){case Node.TEXT_NODE:return this.__templateParseTextAnnotations(t);case Node.ELEMENT_NODE:return this.__templateParseElementAnnotations(t)}}__templateParseTextAnnotations(t){const e=z.get(t.textContent);return e.type!==z.STATIC&&this.__templateAnnotate(e,Q(t))}__templateAnnotate(t,e){if(t.type===z.STATIC)throw new Error("Do not annotate static expr");return t.constant?(e.set(t.invoke(this)),!1):(this.__templateAnnotateRead(t,e),t.mode===z.READWRITE&&t.type===z.PROPERTY&&e.node instanceof HTMLElement&&this.__templateAnnotateWrite(t,e),!0)}__templateAnnotateRead(t,e){const n=new tt(t,e);t.type===z.METHOD&&this.__templateGetBinding(t.fn.name).annotate(n),t.vpaths.forEach(t=>{this.__templateGetBinding(t.name).annotate(n)})}__templateAnnotateWrite(t,e){const{node:n}=e,{nodeName:i}=n,s=n,o=n=>this.set(t.name,e.get());if("INPUT"===i){const t=n.getAttribute("type");if("radio"===t||"checkbox"===t)throw new Error("Unimplemented yet");this.__templateAddEventListener({name:"input",selector:s,listener:o})}else"TEXTAREA"===i?this.__templateAddEventListener({name:"input",selector:s,listener:o}):"SELECT"===i&&this.__templateAddEventListener({name:"change",selector:s,listener:o})}__templateAddEventListener({name:t,selector:e,listener:n}){if(!t)throw new Error("Event listener must define name");if(!n)throw new Error("Event listener must define listener callback");this.__templateEventListeners.push({name:t,selector:e,listener:n})}__templateRemoveEventListener({name:t,selector:e,listener:n}={}){this.__templateEventListeners=this.__templateEventListeners.filter(i=>void 0!==t&&((t!==i.name||void 0!==e)&&(t!==i.name||e!==i.selector||void 0!==n&&i.listener!==n)))}__templateGetBinding(t){return this.__templateGetPathAsArray(t).reduce((t,e)=>t.getChild(e),this.__templateBinding)}}const st=n(0)("xin::component"),ot=a(),rt={},at=it.prototype,lt=Object.getOwnPropertyNames(at);function ct(t){const e=o.singleton();if(rt[t])return rt[t];let n;"v1"===e.get("customElements.version")?n=window[t]:(n=function(){}).prototype=Object.create(window[t].prototype);class i extends n{constructor(){super(),this.is=this.nodeName.toLowerCase(),this.createdCallback()}get $(){return this.__templateHost.getElementsByTagName("*")}created(){}ready(){}attached(){}detached(){}createdCallback(){st.enabled&&st(`CREATED ${this.is}`),this.__id=ot(),this.created(),this.__componentInitData()}readyCallback(){this.__componentReady=!0,b(this).fire("before-ready"),st.enabled&&st(`READY ${this.is}`),this.hasAttribute("xin-id")||(this.setAttribute("xin-id",this.__id),e.put(this.__id,this)),this.__componentInitTemplate(),this.__componentInitListeners(),this.__componentInitProps(),this.__componentInitPropValues(),this.ready(),b(this).fire("ready"),this.__componentAttaching&&this.attachedCallback()}attachedCallback(){this.__componentAttaching=!0,this.__componentReady?(this.__componentMount(),this.notify("$global"),this.notify("$repository"),st.enabled&&st(`ATTACHED ${this.is} ${this.__componentAttaching?"(delayed)":""}`),this.attached(),this.__componentAttaching=!1):this.__componentReadyInvoked||(this.__componentReadyInvoked=!0,this.async(this.readyCallback))}detachedCallback(){this.detached(),this.__componentUnmount()}connectedCallback(){return this.attachedCallback()}disconnectedCallback(){return this.detachedCallback()}get $global(){return window}get $repository(){return e}__componentInitData(){this.__componentDebouncers={},this.__componentReady=!1,this.__componentReadyInvoked=!1,this.__componentAttaching=!1,this.__componentInitialPropValues={}}__componentInitProps(){const t=this.__componentGetProps();for(const e in t){const n=t[e],i=P(e);if("computed"in n){const t=z.getFn(n.computed,[],!0);this.__templateAnnotate(t,Q(this,e)),this.__componentInitialPropValues[e]=()=>t.invoke(this)}if("observer"in n){const t=z.getFn(n.observer,[e],!0);this.__templateAnnotate(t)}if(this.hasAttribute(i)){const t=this.getAttribute(i),s=z.get(t);if("notify"in n&&s.mode===z.READWRITE){const t=Q(t=>this.__templateModel.set(s.name,t));this.__templateGetBinding(e).annotate(new tt(z.get(e,!0),t))}this.__componentInitialPropValues[e]=s.type===z.STATIC?()=>$(t,n.type):()=>s.invoke(this.__templateModel)}}}__componentGetProps(){return this.__componentProps||(this.__componentProps=this.props||{}),this.__componentProps}__componentInitPropValues(){const t=this.__componentGetProps();for(const e in t){const n=t[e];let i;if(i=this.__componentInitialPropValues[e]?this.__componentInitialPropValues[e]():this[e],"value"in n&&ht(e,i)&&(i=S(n.value)),n.required&&void 0===i)throw new Error(`${this.is}:${this.__id} missing required ${e}`);this[e]=i,void 0!==i&&this.notify(e,i)}}__componentInitTemplate(){let t=this.template;1===this.childElementCount&&"TEMPLATE"===this.firstElementChild.nodeName&&(t=this.firstElementChild,this.removeChild(t)),this.__templateInitialize(t)}__componentInitListeners(){this.listeners&&Object.keys(this.listeners).forEach(t=>{const e=function(t){t=t.trim();const[e,...n]=t.split(/\s+/),i=n.length?n.join(" "):null;return{key:t,eventName:e,selector:i}}(t),n=z.getFn(this.listeners[t],[],!0);this.__templateAddEventListener({name:e.eventName,selector:e.selector,listener:t=>n.invoke(this,{evt:t})})})}__componentMount(){this.mount(this)}__componentUnmount(){this.unmount()}async(t,e){return new F(this).start(t,e)}debounce(t,e,n,i){let s=this.__componentDebouncers[t];return s&&s.running?s.cancel():s=this.__componentDebouncers[t]=new M(this,i),s.start(e,n),s}nextFrame(t){return F.nextFrame(t.bind(this))}}return lt.forEach(t=>{"$"!==t&&(i.prototype[t]=at[t])}),rt[t]=i,i}function ht(t,e){return void 0===e||"title"===t&&!e}const ut=ct("HTMLElement");class mt extends ut{static create(t,e={}){const n=document.createElement("div");n.innerHTML=`<xin-fixture><template>${t}</template></xin-fixture>`;const i=n.firstElementChild;return i.__fixtureInitialData=e,document.body.appendChild(i),new Promise(t=>t(i))}attached(){super.attached(),this.set(this.__fixtureInitialData),delete this.__fixtureInitialData,this.connected=!0,this.async(()=>this.fire("connected"))}detached(){super.detached(),this.connected=!1,this.fire("disconnected")}dispose(){this.parentElement.removeChild(this),super.dispose()}async waitConnected(t){this.connected||await b(this).waitFor("connected"),await F.sleep(t)}}O("xin-fixture",mt);class dt extends it{constructor(t,e,n,i){super(),this.__loopInstance=e,this.__loopAs=e.as,this.__loopIndexAs=e.indexAs,this.__loopAnnotations=[],this.__templateInitialize(t),this.is="$for-row",this.__id=this.__templateId,this.__templateChildNodes.forEach(t=>{t.nodeType===Node.ELEMENT_NODE&&(t.__loopModel=this)}),this.update(n,i)}update(t,e){this[this.__loopAs]=t,this[this.__loopIndexAs]=e,this.notify(this.__loopAs,t),this.notify(this.__loopIndexAs,e)}__templateRender(){const t=document.createDocumentFragment();this.__templateChildNodes.forEach(e=>t.appendChild(e)),this.__templateMarker.parentElement.insertBefore(t,this.__templateMarker)}__templateAnnotateRead(t,e){const n=this.__loopInstance.__templateModel,i=new tt(t,e),s=this.__templateGetPathAsArray(t.name);if(s[0]===this.__loopAs||s[0]===this.loopIndexAs)return t.type===z.METHOD&&this.__templateGetBinding(t.fn.name).annotate(i),void t.vpaths.forEach(t=>{this.__templateGetBinding(t.name).annotate(i)});this.__loopAnnotations.push(i),t.type===z.METHOD&&n.__templateGetBinding(t.fn.name).annotate(i),t.vpaths.forEach(t=>{n.__templateGetBinding(t.name).annotate(i)}),e.set(t.invoke(n))}__templateAnnotateWrite(t,e){const n=this.__templateGetPathAsArray(t.name);if(n[0]===this.__loopAs||n[0]===this.loopIndexAs)return;const i=this.__loopInstance.__templateModel,{node:s}=e,{nodeName:o}=s,r=s,a=n=>i.set(t.name,e.get());if("INPUT"===o){const t=s.getAttribute("type");if("radio"===t||"checkbox"===t)throw new Error("Unimplemented yet");this.__templateAddEventListener({name:"input",selector:r,listener:a})}else"TEXTAREA"===o?this.__templateAddEventListener({name:"input",selector:r,listener:a}):"SELECT"===o&&this.__templateAddEventListener({name:"change",selector:r,listener:a})}__templateUninitialize(){super.__templateUninitialize();const t=this.__loopInstance.__templateModel;this.__loopAnnotations.forEach(e=>{e.expr.type===z.METHOD&&t.__templateGetBinding(e.expr.fn.name).deannotate(e),e.expr.vpaths.forEach(n=>{t.__templateGetBinding(n.name).deannotate(e)})})}}const pt=()=>!0;class _t extends ut{get props(){return Object.assign({},super.props,{items:{type:Array,observer:"__loopItemsChanged(items, filter)"},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},filter:{type:Function,observer:"__loopItemsChanged(items, filter)"},to:{type:String,value:""}})}created(){super.created(),this.rows=[]}attached(){super.attached(),this.__loopItemsChanged(this.items,this.filter)}__componentInitTemplate(){if(this.__loopTemplate=this.firstElementChild,!this.__loopTemplate)throw new Error('Invalid xin-for definition,\nmust be:\n<xin-for items="[[items]]">\n  <template>...</template>\n</xin-for>');this.removeChild(this.__loopTemplate),super.__componentInitTemplate()}__componentMount(){let t=this;const e=this.getAttribute("to");if(e){const n=this.parentElement.querySelector(e)||document.querySelector(e);if(!n)throw new Error(`xin-for render to unknown element ${e}`);t=document.createComment("marker-for"),n.appendChild(t)}this.__loopHost=t.parentElement,this.__loopMarker=t,this.mount(this.__loopHost,this.__loopMarker)}__componentUnmount(){this.rows.forEach(t=>{t.unmount(),t.dispose()}),this.rows=[],super.__componentUnmount()}__loopItemsChanged(t,e){this.debounce("__loopItemsChanged",()=>{let e=0;if(t&&t.length){const n=this.filter||pt;t.filter(n).forEach((t,n)=>{if(this.rows[n])this.rows[n].update(t,n);else{const e=new dt(this.__loopTemplate,this,t,n);e.mount(this.__loopHost,this.__loopMarker),this.rows.push(e)}e++})}this.rows.splice(e).forEach(t=>{t.unmount(),t.dispose()})})}itemForElement(t){return this.modelForElement(t).get(this.as)}indexForElement(t){return this.modelForElement(t).get(this.indexAs)}modelForElement(t){for(;t&&!t.__loopModel;)t=t.parentElement;return t.__loopModel}}O("xin-for",_t);class ft extends it{constructor(t,e){super(),this.is="$if-row",this.__ifInstance=e,this.__ifAnnotations=[],this.__templateInitialize(t),this.__id=this.__templateId,this.__templateChildNodes.forEach(t=>{t.nodeType===Node.ELEMENT_NODE&&(t.__ifModel=this)})}__templateRender(){const t=document.createDocumentFragment();this.__templateChildNodes.forEach(e=>t.appendChild(e)),this.__templateMarker.parentElement.insertBefore(t,this.__templateMarker)}__templateAnnotateRead(t,e){const n=this.__ifInstance.__templateModel,i=new tt(t,e);this.__ifAnnotations.push(i),t.type===z.METHOD&&n.__templateGetBinding(t.fn.name).annotate(i),t.vpaths.forEach(t=>{n.__templateGetBinding(t.name).annotate(i)}),e.set(t.invoke(n))}__templateAnnotateWrite(t,e){const n=this.__ifInstance.__templateModel,{node:i}=e,{nodeName:s}=i,o=i,r=i=>n.set(t.name,e.get());if("INPUT"===s){const t=i.getAttribute("type");if("radio"===t||"checkbox"===t)throw new Error("Unimplemented yet");this.__templateAddEventListener({name:"input",selector:o,listener:r})}else"TEXTAREA"===s?this.__templateAddEventListener({name:"input",selector:o,listener:r}):"SELECT"===s&&this.__templateAddEventListener({name:"change",selector:o,listener:r})}__templateStartEventListeners(){const t=this.__ifInstance.__templateModel;this.__templateEventListeners.forEach(({name:e,selector:n,listener:i})=>t.on(e,n,i))}__templateStopEventListeners(){const t=this.__ifInstance.__templateModel;this.__templateEventListeners.forEach(({name:e,selector:n,listener:i})=>t.off(e,n,i))}__templateUninitialize(){super.__templateUninitialize();const t=this.__ifInstance.__templateModel;this.__ifAnnotations.forEach(e=>{e.expr.type===z.METHOD&&t.__templateGetBinding(e.expr.fn.name).deannotate(e),e.expr.vpaths.forEach(n=>{t.__templateGetBinding(n.name).deannotate(e)})})}}class yt extends ut{get props(){return{...super.props,condition:{type:Boolean,observer:"observeCondition(condition)"},to:{type:String,value:""}}}__componentInitTemplate(){const t=this.children;if(t.length<1||t.length>2||"TEMPLATE"!==t[0].nodeName)throw new Error('Invalid xin-if definition, must be <xin-if items="[[items]]"><template>...</template></xin-if>');if(this.__ifThenTemplate=t[0],this.removeChild(this.__ifThenTemplate),1===t.length){if("TEMPLATE"!==t[0].nodeName)throw new Error('Invalid xin-if definition,\nmust be:\n<xin-if items="[[items]]">\n  <template>...</template>\n  <template else>...</template>\n</xin-if>');this.__ifElseTemplate=t[0],this.removeChild(this.__ifElseTemplate)}super.__componentInitTemplate()}__componentMount(){let t=this;const e=this.getAttribute("to");if(e){const n=this.parentElement.querySelector(e)||document.querySelector(e);if(!n)throw new Error(`xin-for render to unknown element ${e}`);t=document.createComment("marker-for"),n.appendChild(t)}this.__ifHost=t.parentElement,this.__ifMarker=t,this.mount(this.__ifHost,this.__ifMarker)}__componentUnmount(){this.__ifThenRow.dispose(),this.__ifElseRow.dispose(),this.__ifThenRow=void 0,this.__ifElseRow=void 0,super.__componentUnmount()}observeCondition(t){this.__ifThenRow||(this.__ifThenRow=new ft(this.__ifThenTemplate,this),this.__ifElseTemplate&&(this.__ifElseRow=new ft(this.__ifElseTemplate,this))),t?(this.__ifThenRow.__templateMounted||this.__ifThenRow.mount(this.__ifHost,this.__ifMarker),this.__ifElseRow&&this.__ifElseRow.__templateMounted&&this.__ifElseRow.unmount()):(this.__ifThenRow.__templateMounted&&this.__ifThenRow.unmount(),this.__ifElseRow&&!this.__ifElseRow.__templateMounted&&this.__ifElseRow.mount(this.__ifHost,this.__ifMarker))}}O("xin-if",yt);const Et="transition",gt="animation";class wt extends ut{get props(){return{...super.props,name:{type:String,required:!0},type:{type:String,value:Et}}}ready(){super.ready(),this.enterClass=`${this.name}-enter`,this.enterActiveClass=`${this.name}-enter-active`,this.enterToClass=`${this.name}-enter-to`,this.leaveClass=`${this.name}-leave`,this.leaveActiveClass=`${this.name}-leave-active`,this.leaveToClass=`${this.name}-leave-to`}async insertBefore(t,e){const n=t instanceof DocumentFragment?[...t.children]:[t];xt(n,this.enterClass),super.insertBefore(t,e),await new Promise(t=>{F.nextFrame(()=>{xt(n,this.enterActiveClass,this.enterToClass),F.nextFrame(()=>{Ft(n,this.enterClass),Mt(n,this.type,t)})})}),Ft(n,this.enterActiveClass,this.enterToClass)}async removeChild(t){if(1!==t.nodeType)return;const e=[t];xt(e,this.leaveClass),await new Promise(t=>{F.nextFrame(()=>{xt(e,this.leaveActiveClass,this.leaveToClass),Mt(e,this.type,t)})}),super.removeChild(t)}}O("xin-transition",wt);const vt=/\b(transform|all)(,|$)/,Ct="transition",bt="transitionend",At="animation",Tt="animationend";function xt(t,...e){t.forEach(t=>{t.classList.add(...e)})}function Ft(t,...e){t.forEach(t=>{t.classList.remove(...e)})}function Mt(t,e,n){let i=0;function s(){++i>=t.length&&n()}t.forEach(t=>{const{type:n,timeout:i,propCount:o}=function(t,e){const n=window.getComputedStyle(t),i=(n[Ct+"Delay"]||"").split(", "),s=(n[Ct+"Duration"]||"").split(", "),o=Nt(i,s),r=(n[At+"Delay"]||"").split(", "),a=(n[At+"Duration"]||"").split(", "),l=Nt(r,a);let c,h=0,u=0;e===Et?o>0&&(c=Et,h=o,u=s.length):e===gt?l>0&&(c=gt,h=l,u=a.length):(h=Math.max(o,l),u=(c=h>0?o>l?Et:gt:null)?c===Et?s.length:a.length:0);const m=c===Et&&vt.test(n[Ct+"Property"]);return{type:c,timeout:h,propCount:u,hasTransform:m}}(t,e);if(!n)return s();const r=n===Et?bt:Tt;let a=0;const l=function(){t.removeEventListener(r,c),s()},c=function(e){e.target===t&&++a>=o&&l()};setTimeout(function(){a<o&&l()},i+1),t.addEventListener(r,c)})}function Nt(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map(function(e,n){return kt(e)+kt(t[n])}))}function kt(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}n.d(e,"event",function(){return b}),n.d(e,"Fx",function(){return N}),n.d(e,"bootstrap",function(){return r}),n.d(e,"Repository",function(){return o}),n.d(e,"Async",function(){return F}),n.d(e,"Debounce",function(){return M}),n.d(e,"define",function(){return O}),n.d(e,"base",function(){return ct}),n.d(e,"Component",function(){return ut}),n.d(e,"Template",function(){return it}),n.d(e,"Filter",function(){return B}),n.d(e,"components",function(){return i})}])});